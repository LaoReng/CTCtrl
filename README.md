# è·¨æ—¶ç©ºæ§åˆ¶å°â€”åŸºäºWebçš„è¿œç¨‹è®¾å¤‡ç›‘æ§ç³»ç»Ÿ

## ä»‹ç»

â€‹	è·¨æ—¶ç©ºæ§åˆ¶å°æ˜¯ä¸€æ¬¾åˆ›æ–°æ€§çš„è¿œç¨‹æ§åˆ¶é¡¹ç›®ï¼Œæ—¨åœ¨å®ç°ç”¨æˆ·å¯¹è¿œç¨‹ç”µè„‘çš„å…¨æ–¹ä½æ“æ§ã€‚æ— è®ºèº«å¤„ä½•åœ°ï¼Œç”¨æˆ·å‡å¯é€šè¿‡Webç«¯å®ç°å¯¹ç›®æ ‡è®¾å¤‡çš„é¥æ§ï¼ŒåŒ…æ‹¬é¼ æ ‡ã€é”®ç›˜ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œä»¿ä½›ç½®èº«äºç›®æ ‡ç”µè„‘æ—ã€‚è¯¥é¡¹ç›®ä¸ä»…æä¾›äº†ä¾¿åˆ©çš„è¿œç¨‹ç®¡ç†åŠŸèƒ½ï¼Œè¿˜å…·å¤‡äº†å®‰å…¨å¯é çš„ç‰¹æ€§ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®å’Œæ“ä½œçš„éšç§å’Œå®‰å…¨æ€§ã€‚è·¨æ—¶ç©ºæ§åˆ¶å°çš„ç›®æ ‡æ˜¯è®©ç”¨æˆ·åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½è½»æ¾åœ°è®¿é—®å’Œæ“æ§è¿œç¨‹è®¾å¤‡ï¼Œä¸ºå·¥ä½œå’Œç”Ÿæ´»å¸¦æ¥æ›´å¤§çš„ä¾¿åˆ©å’Œçµæ´»æ€§ 

### è½¯ä»¶æ¶æ„

â€‹	è¯¥é¡¹ç›®å¼€å‘é‡‡ç”¨ä¼ ç»ŸB/Sæ¶æ„ä¸C/Sæ¶æ„è”åˆå¼€å‘

â€‹	å³æ§åˆ¶ç«¯ä¸ºwebç½‘é¡µã€è¢«æ§ç«¯ä¸ºWindowså®¢æˆ·ç«¯åº”ç”¨ç¨‹åº

### éƒ¨ç½²æ•™ç¨‹

#### ç¯å¢ƒè¦æ±‚ï¼š

â€‹	éƒ¨ç½²ä¹‹å‰éœ€è¦å®‰è£…Visual Studioä»£ç ç¼–è¯‘å™¨ï¼ŒåŒ…æ‹¬VS Codeã€VS2019æˆ–æ›´é«˜ç‰ˆæœ¬

â€‹	è¿˜éœ€è¦å‡†å¤‡ä¸€å°Linuxæ“ä½œç³»ç»Ÿçš„æœºå™¨ï¼Œå¹¶ä½¿ç”¨VS2019ä¸ä¹‹å»ºç«‹SSHè¿æ¥

â€‹	SSHè¿æ¥é…ç½®å‚è€ƒï¼šhttps://blog.csdn.net/weixin_64647426/article/details/131341970ã€https://blog.csdn.net/weixin_64647426/article/details/129319160

#### Windowsç³»ç»Ÿé…ç½®ï¼š

â€‹	**å®‰è£…booståº“**

â€‹		ä¸‹è½½åœ°å€ï¼šhttps://sourceforge.net/projects/boost/files/boost-binaries/

â€‹		<img src="README.assets/image-20240707122410061.png" alt="image-20240707122410061" style="zoom:80%;" />

â€‹		<img src="README.assets/image-20240707122438471.png" alt="image-20240707122438471" style="zoom:80%;" />

â€‹	**å®‰è£…openCV**

â€‹		ä¸‹è½½åœ°å€ï¼šhttps://opencv.org/releases/

â€‹		<img src="README.assets/image-20240707124025403.png" alt="image-20240707124025403" style="zoom:80%;" />

â€‹	**å®‰è£…ffmpeg**

â€‹		ä¸‹è½½åœ°å€ï¼šhttps://github.com/BtbN/FFmpeg-Builds/releases

â€‹		<img src="README.assets/image-20240707122858109.png" alt="image-20240707122858109" style="zoom:80%;" />

â€‹	è¿›å…¥é¡µé¢æ‰¾å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œæ˜¯Windowsç³»ç»Ÿè¦ä½¿ç”¨ffmpegè¿›è¡Œå¼€å‘

â€‹	è¿™é‡ŒåŒ…å«ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯å¸¦sharedçš„ï¼Œä¸€ä¸ªæ˜¯ä¸å¸¦sharedï¼Œå¸¦sharedçš„ç‰ˆæœ¬é‡Œé¢åŒ…å«ffmpegçš„åº“æ–‡ä»¶å¯ä»¥å¯¹ffmpegè¿›è¡Œå†å¼€å‘ï¼Œä¸å¸¦sharedçš„ç‰ˆæœ¬åªåŒ…å«äº†ffmpegçš„ä½¿ç”¨å·¥å…·ï¼Œæˆ‘ä»¬æ˜¯è¦åˆ©ç”¨ffmpegæ¥è¿›è¡Œæˆ‘ä»¬ç¨‹åºçš„ä¸€ä¸ªå¼€å‘æ‰€ä»¥é€‰æ‹©å¸¦sharedçš„ç‰ˆæœ¬ï¼Œè¿™é‡ŒæŒ‰å¤§å®¶çš„éœ€è¦é€‰æ‹©å°±å¯ä»¥

â€‹	ä¸‹è½½å¥½åï¼Œè§£å‹å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œffmpegçš„å·¥å…·å°±åœ¨binç›®å½•ä¸‹

<img src="README.assets/image-20240707123016897.png" alt="image-20240707123016897" style="zoom:80%;" />

#### Linuxç³»ç»Ÿé…ç½®ï¼š

â€‹	Linuxæ“ä½œç³»ç»Ÿéœ€è¦å®‰è£…gccã€g++ã€gdbã€gitã€cmakeã€makeã€rsyncã€zipã€boostã€curlã€websocketppä»¥åŠMySQLå¼€å‘ç¯å¢ƒ

â€‹	**å®‰è£…å‘½ä»¤ï¼ˆä»¥Ubuntu22.04ä¸ºä¾‹ï¼‰ï¼š**

â€‹		`sudo apt install gcc g++ gdb git cmake make rsync zip libboost-dev curl libcurl4-openssl-dev`

â€‹		`sudo apt install mysql-server mysql-client libmysqlclient-dev`

â€‹		MySQLè¿œç¨‹è¿æ¥é…ç½®å‚è€ƒï¼šhttps://blog.csdn.net/weixin_64647426/article/details/134105615

â€‹	**websocketppå®‰è£…å‘½ä»¤ï¼ˆä»¥Ubuntu22.04ä¸ºä¾‹ï¼‰ï¼š**

â€‹		å…‹éš†websocketppä»“åº“ä»£ç ï¼š`git clone https://github.com/zaphoyd/websocketpp.git`

â€‹		è¿›å…¥websocketppä»“åº“ï¼š`cd websocketpp`

â€‹		åˆ›å»ºå¹¶è¿›å…¥buildç›®å½•ï¼š`mkdir build && cd build`

â€‹		é…ç½®é¡¹ç›®ï¼š`cmake ..`

â€‹		ç¼–è¯‘é¡¹ç›®ï¼š`make`

â€‹		å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„ï¼š`sudo make install`

éƒ¨ç½²æ•™ç¨‹ï¼š

+ å°†ä»“åº“ä¸­ä»£ç å…‹éš†åˆ°æœ¬åœ°

  `git clone https://gitee.com/shenzhen-hong-kong-rolling/cross-time-and-space-console.git`

+ å‰ç«¯éƒ¨ç½²

  é¦–å…ˆåœ¨[nodeå®˜ç½‘](https://nodejs.org/en)ä¸‹è½½node16ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚

  ä½¿ç”¨`vscode`æ‰“å¼€`crossTime-web`ï¼Œä½¿ç”¨ç»ˆç«¯å‘½ä»¤è¾“å…¥`npm install`ï¼Œé™ç­‰ä¸€ä¼šï¼Œç›´è‡³`node_modules`æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œç„¶åä½¿ç”¨`npm run server`å‘½ä»¤å¯åŠ¨é¡¹ç›®

+ æœåŠ¡å™¨éƒ¨ç½²

  ä½¿ç”¨VS2019æ‰“å¼€ï¼ŒCrossTimeç›®å½•ä¸‹çš„CrossTime.slnæ–‡ä»¶ï¼ŒCTRL + Bè¿›è¡Œé¡¹ç›®ç¼–è¯‘

  ç¼–è¯‘å®Œæˆåï¼Œåœ¨./cross-time-and-space-console-master/CrossTime/CrossTime/bin/x64/Debugç›®å½•ä¸‹å³å¯çœ‹åˆ°ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œç¨‹åº

+ è¢«æ§ç«¯ç¨‹åºéƒ¨ç½²

  ä½¿ç”¨VS2019æ‰“å¼€ï¼ŒbeCtrlServerç›®å½•ä¸‹çš„beCtrlServer.slnæ–‡ä»¶ï¼ŒCTRL + Bè¿›è¡Œé¡¹ç›®ç¼–è¯‘

  ç¼–è¯‘å®Œæˆåï¼Œåœ¨./cross-time-and-space-console-master/beCtrlServer/x64/Debugç›®å½•ä¸‹å³å¯çœ‹åˆ°ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œç¨‹åº

### ä½¿ç”¨è¯´æ˜

+ é¦–å…ˆè®¿é—®æˆ‘ä»¬[ç½‘ç«™](http://www.ctctrl.nat300.top)ï¼Œè¿›è¡Œè´¦å·çš„æ³¨å†Œã€‚

+ æ³¨å†Œå¹¶ç™»å½•ç½‘ç«™ï¼Œå³ç°åœ¨å°±å¯ä»¥å¯¹å­˜åœ¨çš„è®¾å¤‡è¿›è¡Œæ§åˆ¶äº†

+ å¦‚æœæƒ³å°†è‡ªå·±çš„è®¾å¤‡æˆä¸ºè¢«æ§ç«¯ï¼Œè¯·åˆ°ä¸‹è½½ä¸­å¿ƒä¸‹è½½æœ€æ–°çš„è¢«æ§ç«¯å®‰è£…ç¨‹åº

+ å®‰è£…è¿è¡Œï¼Œç™»å½•å³å¯æˆä¸ºè¢«æ§ç«¯

### å‚ä¸è´¡çŒ®

+ [LuWeiDong](https://github.com/LaoReng)
+ [LiShiWei](https://gitee.com/shenzhen-hong-kong-rolling)              
+ [WangMeiQi](https://gitee.com/wang-mei-qi)        

## è¯¦ç»†è®¾è®¡

### æ•°æ®åº“è¡¨è®¾è®¡

<img src="README.assets/image-20240511192403351.png" alt="image-20240511192403351" style="zoom:80%;" />

ç”¨æˆ·è¡¨ï¼ˆç”¨æˆ·idï¼Œç”¨æˆ·åï¼Œå¤´åƒï¼Œå¯†ç ï¼Œæ€§åˆ«ï¼Œåœ°å€ï¼Œç”µè¯ï¼Œæ³¨å†Œæ—¶é—´ï¼Œä½™é¢ï¼‰

å¿˜è®°å¯†ç è¡¨ï¼ˆç”¨æˆ·idï¼Œé—®é¢˜1ï¼Œç­”æ¡ˆ1ï¼Œé—®é¢˜2ï¼Œç­”æ¡ˆ2ï¼‰

VIPè¡¨ï¼ˆç”¨æˆ·idï¼ŒVIPçŠ¶æ€ï¼ŒVIPç­‰çº§ï¼Œç´¯è®¡å……å€¼é‡‘é¢ï¼Œåˆ°æœŸæ—¶é—´ï¼Œç”¨æˆ·å¯æ§è®¾å¤‡æ—¶é—´ï¼Œå¯æ§æ¬¡æ•°ï¼Œå‰©ä½™æ¬¡æ•°ï¼‰

ç™»å½•è®°å½•è¡¨ï¼ˆç”¨æˆ·idï¼Œipåœ°å€ï¼Œç»åº¦ï¼Œçº¬åº¦ï¼Œç™»å½•è®¾å¤‡ç±»å‹ï¼Œç™»å½•æ—¶é—´ï¼‰

è®¾å¤‡è¡¨ï¼ˆè®¾å¤‡idï¼Œè®¾å¤‡åï¼Œå¯†é’¥ï¼Œç”³è¯·æ—¶é—´ï¼Œç”³è¯·çŠ¶æ€ï¼Œç»åº¦ï¼Œçº¬åº¦ï¼‰

ç®¡ç†å‘˜è¡¨ï¼ˆç®¡ç†å‘˜idï¼Œç®¡ç†å‘˜åï¼Œç”µè¯ï¼Œå¯†ç ï¼Œæ³¨å†Œæ—¶é—´ï¼‰

å…¬å‘Šè¡¨ï¼ˆå…¬å‘Šidï¼Œå†…å®¹ï¼Œåˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´ï¼‰

ç”¨æˆ·å¯æ§è®¾å¤‡è¡¨ï¼ˆç”¨æˆ·idï¼Œè®¾å¤‡idï¼‰

ç®¡ç†å‘˜å‘å¸ƒå…¬å‘Šè¡¨ï¼ˆç®¡ç†å‘˜idï¼Œå…¬å‘Šidï¼‰

è®¾å¤‡æ‰€å±ç”¨æˆ·è¡¨ï¼ˆç”¨æˆ·idï¼Œè®¾å¤‡idï¼‰

ç”¨æˆ·æ§åˆ¶è®¾å¤‡è¡¨[å†å²è®°å½•]ï¼ˆæ§åˆ¶è€…idï¼Œè¢«æ§è®¾å¤‡idï¼Œå¼€å§‹æ§åˆ¶æ—¶é—´ï¼‰

#### å¯¹æ•°æ®è¡¨å»é™¤å†—ä½™è¡¨ï¼Œå¹¶å¯¹æ•°æ®è¡¨è¿›è¡Œä¼˜åŒ–

ç”±äºç”¨æˆ·è¡¨å­—æ®µæ•°æ®å¤ªè¿‡åºå¤§ï¼Œæ‰€ä»¥å°†ç”¨æˆ·å­—æ®µè¿›è¡Œæ‹†åˆ†ä¸ºä¸‰å¼ è¡¨ï¼šç”¨æˆ·è¡¨ã€å¿˜è®°å¯†ç è¡¨ä»¥åŠVIPè¡¨

ç”±äºè®¾å¤‡æ‰€å±ç”¨æˆ·è¡¨çš„å…³ç³»ä¸ºä¸€å¯¹å¤šçš„å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥å°†è®¾å¤‡æ‰€å±ç”¨æˆ·è¡¨å’Œè®¾å¤‡è¡¨è¿›è¡Œåˆå¹¶ï¼Œå»é™¤å†—ä½™

ç”±äºç”¨æˆ·å¯ä»¥æ§åˆ¶å¤šä¸ªè®¾å¤‡å¹¶ä¸”ï¼Œä¹Ÿå¯ä»¥å¯¹è®¾å¤‡è¿›è¡Œä¸åŒæ—¶é—´æ®µçš„å¤šæ¬¡æ§åˆ¶ï¼Œæ‰€ä»¥å°†ç”¨æˆ·æ§åˆ¶è®¾å¤‡è¡¨åŠ ä¸Šå•ç‹¬çš„æ§åˆ¶idï¼Œå¹¶ä¸ä¸è®¾å¤‡è¡¨è¿›è¡Œåˆå¹¶å¤„ç†

**ä¼˜åŒ–åæ•°æ®è¡¨ï¼š**

ç”¨æˆ·è¡¨ï¼ˆ<u>ç”¨æˆ·id</u>ï¼Œç”¨æˆ·åï¼Œå¤´åƒï¼Œå¯†ç ï¼Œæ€§åˆ«ï¼Œåœ°å€ï¼Œç”µè¯ï¼Œæ³¨å†Œæ—¶é—´ï¼Œä½™é¢ï¼‰

å¿˜è®°å¯†ç è¡¨ï¼ˆ<span style="text-decoration: underline; text-decoration-style: wavy;"><u>ç”¨æˆ·id</u></span>ï¼Œé—®é¢˜1ï¼Œç­”æ¡ˆ1ï¼Œé—®é¢˜2ï¼Œç­”æ¡ˆ2ï¼‰

VIPè¡¨ï¼ˆ<span style="text-decoration: underline; text-decoration-style: wavy;"><u>ç”¨æˆ·id</u></span>ï¼ŒVIPçŠ¶æ€ï¼ŒVIPç­‰çº§ï¼Œç´¯è®¡å……å€¼é‡‘é¢ï¼Œåˆ°æœŸæ—¶é—´ï¼Œç”¨æˆ·å¯æ§è®¾å¤‡æ—¶é—´ï¼Œå¯æ§æ¬¡æ•°ï¼Œå‰©ä½™æ¬¡æ•°ï¼‰

ç™»å½•è®°å½•è¡¨ï¼ˆ<span style="text-decoration: underline; text-decoration-style: wavy;">è®°å½•id</span>ï¼Œ<u>ç”¨æˆ·id</u>ï¼Œipåœ°å€ï¼Œç»åº¦ï¼Œçº¬åº¦ï¼Œç™»å½•è®¾å¤‡ç±»å‹ï¼Œç™»å½•æ—¶é—´ï¼‰

è®¾å¤‡è¡¨ï¼ˆ<u>è®¾å¤‡id</u>ï¼Œè®¾å¤‡åï¼Œ<span style="text-decoration: underline; text-decoration-style: wavy;">æ‰€å±ç”¨æˆ·id</span>ï¼Œå¯†é’¥ï¼Œç”³è¯·æ—¶é—´ï¼Œç”³è¯·çŠ¶æ€ï¼Œç»åº¦ï¼Œçº¬åº¦ï¼‰

ç®¡ç†å‘˜è¡¨ï¼ˆ<u>ç®¡ç†å‘˜id</u>ï¼Œç®¡ç†å‘˜åï¼Œç”µè¯ï¼Œå¯†ç ï¼Œæ³¨å†Œæ—¶é—´ï¼‰

å…¬å‘Šè¡¨ï¼ˆ<u>å…¬å‘Šid</u>ï¼Œ<span style="text-decoration: underline; text-decoration-style: wavy;">ç®¡ç†å‘˜id</span>ï¼Œå†…å®¹ï¼Œåˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´ï¼‰

ç”¨æˆ·å¯æ§è®¾å¤‡è¡¨ï¼ˆ<span style="text-decoration: underline; text-decoration-style: wavy;"><u>ç”¨æˆ·idï¼Œè®¾å¤‡id</u></span>ï¼‰

ç”¨æˆ·æ§åˆ¶è®¾å¤‡è¡¨[æ§åˆ¶è®¾å¤‡å†å²è®°å½•]ï¼ˆ<u>æ§åˆ¶id</u>ï¼Œ<span style="text-decoration: underline; text-decoration-style: wavy;">æ§åˆ¶è€…idï¼Œè¢«æ§è®¾å¤‡id</span>ï¼Œå¼€å§‹æ§åˆ¶æ—¶é—´ï¼‰

#### æ•°æ®è¡¨å…³ç³»çº¦æŸ

ç”¨æˆ·è¡¨

| å±æ€§     | ç±»å‹      | çº¦æŸ                        |
| -------- | --------- | --------------------------- |
| ç”¨æˆ·id   | INT       | primary key, AUTO_INCREMENT |
| ç”¨æˆ·å   | VCHAR(40) | not null                    |
| å¤´åƒ     | VCHAR(40) |                             |
| å¯†ç      | CHAR(15)  | not null                    |
| æ€§åˆ«     | CHAR(4)   |                             |
| åœ°å€     | VCHAR(40) |                             |
| ç”µè¯     | CHAR(12)  |                             |
| æ³¨å†Œæ—¶é—´ | DATETIME  | not null                    |
| ä½™é¢     | DOUBLE    | not null                    |

å¿˜è®°å¯†ç è¡¨

| å±æ€§   | ç±»å‹      | çº¦æŸ                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| ç”¨æˆ·id | INT       | primary key, foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| é—®é¢˜1  | VCHAR(40) | not null                                                     |
| ç­”æ¡ˆ1  | VCHAR(40) | not null                                                     |
| é—®é¢˜2  | VCHAR(40) | not null                                                     |
| ç­”æ¡ˆ2  | VCHAR(40) | not null                                                     |

VIPè¡¨

| å±æ€§             | ç±»å‹     | çº¦æŸ                                                         |
| ---------------- | -------- | ------------------------------------------------------------ |
| ç”¨æˆ·id           | INT      | primary key, foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| VIPçŠ¶æ€          | BIT      | not null                                                     |
| VIPç­‰çº§          | INT      | not null                                                     |
| ç´¯è®¡å……å€¼é‡‘é¢     | DOUBLE   | not null                                                     |
| åˆ°æœŸæ—¶é—´         | DATETIME | not null                                                     |
| ç”¨æˆ·å¯æ§è®¾å¤‡æ—¶é—´ | INT      | not null                                                     |
| å¯æ§æ¬¡æ•°         | INT      | not null                                                     |
| å‰©ä½™æ¬¡æ•°         | INT      | not null                                                     |

ç™»å½•è®°å½•è¡¨

| å±æ€§         | ç±»å‹      | çº¦æŸ                                              |
| ------------ | --------- | ------------------------------------------------- |
| è®°å½•id       | INT       | primary key, AUTO_INCREMENT                       |
| ç”¨æˆ·id       | INT       | foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| ipåœ°å€       | VCHAR(40) | not null                                          |
| ç»åº¦         | DOUBLE    | not null                                          |
| çº¬åº¦         | DOUBLE    | not null                                          |
| ç™»å½•è®¾å¤‡ç±»å‹ | VCHAR(40) | not null                                          |
| ç™»å½•æ—¶é—´     | DATETIME  | not null                                          |

è®¾å¤‡è¡¨

| å±æ€§       | ç±»å‹      | çº¦æŸ                                              |
| ---------- | --------- | ------------------------------------------------- |
| è®¾å¤‡id     | INT       | primary key, AUTO_INCREMENT                       |
| è®¾å¤‡å     | VCHAR(40) | not null                                          |
| æ‰€å±ç”¨æˆ·id | INT       | foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| å¯†é’¥       | VCHAR(40) | not null                                          |
| ç”³è¯·æ—¶é—´   | DATETIME  | not null                                          |
| ç”³è¯·çŠ¶æ€   | BIT       | not null                                          |
| ç»åº¦       | DOUBLE    | not null                                          |
| çº¬åº¦       | DOUBLE    | not null                                          |

ç®¡ç†å‘˜

| å±æ€§     | ç±»å‹      | çº¦æŸ                        |
| -------- | --------- | --------------------------- |
| ç®¡ç†å‘˜id | INT       | primary key, AUTO_INCREMENT |
| ç®¡ç†å‘˜å | VCHAR(40) | not null                    |
| ç”µè¯     | CHAR(12)  | not null                    |
| å¯†ç      | CHAR(15)  | not null                    |
| æ³¨å†Œæ—¶é—´ | DATETIME  | not null                    |

å…¬å‘Šè¡¨

| å±æ€§     | ç±»å‹      | çº¦æŸ                                              |
| -------- | --------- | ------------------------------------------------- |
| å…¬å‘Šid   | INT       | primary key, AUTO_INCREMENT                       |
| ç®¡ç†å‘˜id | INT       | foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| å†…å®¹     | VCHAR(40) | not null                                          |
| åˆ›å»ºæ—¶é—´ | DATETIME  | not null                                          |
| æ›´æ–°æ—¶é—´ | DATETIME  | not null                                          |

ç”¨æˆ·å¯æ§è®¾å¤‡è¡¨

| å±æ€§   | ç±»å‹ | çº¦æŸ                                                         |
| ------ | ---- | ------------------------------------------------------------ |
| ç”¨æˆ·id | INT  | primary key, foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| è®¾å¤‡id | INT  | primary key, foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |

ç”¨æˆ·æ§åˆ¶è®¾å¤‡è¡¨[æ§åˆ¶å†å²è®°å½•]

| å±æ€§         | ç±»å‹     | çº¦æŸ                                              |
| ------------ | -------- | ------------------------------------------------- |
| æ§åˆ¶id       | INT      | primary key, AUTO_INCREMENT                       |
| æ§åˆ¶è€…id     | INT      | foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| è®¾å¤‡id       | INT      | foreign key, ON DELETE CASCADE, ON UPDATE CASCADE |
| å¼€å§‹æ§åˆ¶æ—¶é—´ | DATETIME | not null                                          |

#### SQLå®ç°

##### åˆ›å»ºæ•°æ®åº“

~~~sql
CREATE DATABASE IF NOT EXISTS CrossTime;
~~~

##### åˆ›å»ºæ•°æ®è¡¨

ç”¨æˆ·è¡¨ï¼š

~~~sql
CREATE TABLE IF NOT EXISTS `ctuser` (
  `Uid` int NOT NULL AUTO_INCREMENT COMMENT 'ç”¨æˆ·id',
  `Uname` varchar(40) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL COMMENT 'ç”¨æˆ·å',
  `Uavatar` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç”¨æˆ·å¤´åƒ',
  `Upassword` char(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'å¯†ç ',
  `Usex` char(4) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '2' COMMENT 'æ€§åˆ«',
  `Uaddr` varchar(40) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL COMMENT 'ä½å€',
  `Uphone` char(12) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'ç”µè¯',
  `Uregister_time` datetime NOT NULL COMMENT 'æ³¨å†Œæ—¶é—´',
  `Ubalance` double NOT NULL COMMENT 'ä½™é¢',
  PRIMARY KEY (`Uid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

å¿˜è®°å¯†ç è¡¨ï¼š

~~~sql
CREATE TABLE `revert_password` (
  `Uid` int NOT NULL COMMENT 'ç”¨æˆ·id',
  `question1` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'é—®é¢˜1',
  `answer1` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'ç­”æ¡ˆ1',
  `question2` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'é—®é¢˜2',
  `answer2` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'ç­”æ¡ˆ2',
  PRIMARY KEY (`Uid`),
  CONSTRAINT `ctuser` FOREIGN KEY (`Uid`) REFERENCES `ctuser` (`Uid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

VIPè¡¨ï¼š

~~~sql
CREATE TABLE `vip` (
  `Uid` int NOT NULL COMMENT 'ç”¨æˆ·id',
  `status` bit(1) NOT NULL COMMENT 'vipçŠ¶æ€',
  `grade` int NOT NULL COMMENT 'vipç­‰çº§',
  `acc_amount` double NOT NULL COMMENT 'ç´¯è®¡å……å€¼é‡‘é¢',
  `expire_time` datetime NOT NULL COMMENT 'åˆ°æœŸæ—¶é—´',
  `ctrl_time` int NOT NULL COMMENT 'ç”¨æˆ·å¯æ§è®¾å¤‡æ—¶é—´',
  `ctrl_num` int NOT NULL COMMENT 'å¯æ§æ¬¡æ•°',
  `surplus_num` int NOT NULL COMMENT 'å‰©ä½™æ¬¡æ•°',
  PRIMARY KEY (`Uid`),
  CONSTRAINT `Uid` FOREIGN KEY (`Uid`) REFERENCES `ctuser` (`Uid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

ç™»å½•è®°å½•è¡¨ï¼š

~~~sql
CREATE TABLE `ulogin_history` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'è®°å½•id',
  `Uid` int NOT NULL COMMENT 'ç”¨æˆ·id',
  `ipAddr` varchar(40) NOT NULL COMMENT 'ipåœ°å€',
  `longitude` double NOT NULL COMMENT 'ç»åº¦',
  `latitude` double NOT NULL COMMENT 'çº¬åº¦',
  `address` varchar(255) NOT NULL COMMENT 'ç™»å½•åœ°ç‚¹',
  `dtype` varchar(40) NOT NULL COMMENT 'ç™»å½•è®¾å¤‡ç±»å‹',
  `loginTime` datetime NOT NULL COMMENT 'ç™»å½•æ—¶é—´',
  PRIMARY KEY (`id`),
  KEY `userid` (`Uid`),
  CONSTRAINT `userid` FOREIGN KEY (`Uid`) REFERENCES `ctuser` (`Uid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

è®¾å¤‡è¡¨ï¼š

~~~sql
CREATE TABLE `equipment` (
  `Eid` int NOT NULL AUTO_INCREMENT COMMENT 'è®¾å¤‡id',
  `Ename` varchar(40) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL COMMENT 'è®¾å¤‡å',
  `Uid` int NOT NULL COMMENT 'æ‰€å±ç”¨æˆ·id',
  `secret_key` varchar(40) NOT NULL COMMENT 'æ§åˆ¶å¯†é’¥',
  `app_time` datetime NOT NULL COMMENT 'ç”³è¯·æ—¶é—´',
  `app_status` bit(1) NOT NULL COMMENT 'ç”³è¯·çŠ¶æ€',
  `longitude` double NOT NULL COMMENT 'ç»åº¦',
  `latitude` double NOT NULL COMMENT 'çº¬åº¦',
  PRIMARY KEY (`Eid`),
  KEY `belone_id` (`Uid`),
  CONSTRAINT `belone_id` FOREIGN KEY (`Uid`) REFERENCES `ctuser` (`Uid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;
~~~

ç®¡ç†å‘˜è¡¨ï¼š

~~~sql
CREATE TABLE `manager` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'ç®¡ç†å‘˜id',
  `name` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'ç®¡ç†å‘˜å',
  `phone` char(12) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'ç”µè¯',
  `password` char(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'å¯†ç ',
  `register_time` datetime NOT NULL COMMENT 'æ³¨å†Œæ—¶é—´',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

å…¬å‘Šè¡¨ï¼š

~~~sql
CREATE TABLE `notice` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'å…¬å‘Šid',
  `mid` int DEFAULT NULL COMMENT 'å‘å¸ƒè€…id',
  `title` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'æ ‡é¢˜',
  `content` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'å†…å®¹',
  `create_time` datetime NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
  `update` datetime NOT NULL COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`),
  KEY `mid` (`mid`),
  CONSTRAINT `mid` FOREIGN KEY (`mid`) REFERENCES `manager` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

ç”¨æˆ·å¯æ§è®¾å¤‡è¡¨ï¼š

~~~sql
CREATE TABLE `user_ctrl_equip` (
  `uid` int NOT NULL COMMENT 'ç”¨æˆ·id',
  `eid` int NOT NULL COMMENT 'è®¾å¤‡id',
  PRIMARY KEY (`uid`,`eid`),
  KEY `ctrl_eid` (`eid`),
  CONSTRAINT `ctrl_eid` FOREIGN KEY (`eid`) REFERENCES `equipment` (`Eid`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `ctrl_uid` FOREIGN KEY (`uid`) REFERENCES `ctuser` (`Uid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

ç”¨æˆ·æ§åˆ¶è®¾å¤‡è¡¨ï¼š

~~~sql
CREATE TABLE IF NOT EXISTS `ctrl_history` (
  `cid` int NOT NULL AUTO_INCREMENT COMMENT 'æ§åˆ¶å†å²id',
  `uid` int DEFAULT NULL COMMENT 'æ§åˆ¶è€…id',
  `eid` int DEFAULT NULL COMMENT 'è¢«æ§è®¾å¤‡id',
  `start_time` datetime NOT NULL COMMENT 'å¼€å§‹æ§åˆ¶æ—¶é—´',
  PRIMARY KEY (`cid`),
  KEY `his_ctrl_uid` (`uid`),
  KEY `his_ctrl_eid` (`eid`),
  CONSTRAINT `his_ctrl_eid` FOREIGN KEY (`eid`) REFERENCES `equipment` (`Eid`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `his_ctrl_uid` FOREIGN KEY (`uid`) REFERENCES `ctuser` (`Uid`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
~~~

### æ§åˆ¶ç«¯å‰å°â†â†’æœåŠ¡å™¨é€šä¿¡åè®®å°è£…ï¼ˆåŒ…æ‹¬HTTPè¯·æ±‚åŒ…&åº”ç­”åŒ…ï¼‰

#### æ³¨å†Œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /register HTTP/1.1
Host: 192.168.10.132:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Accept: application/json

{
	"phone" : "...",           // æ‰‹æœºå·
	"username" : "...",        // ç”¨æˆ·å
	"password" : "...",        // å¯†ç 
	"balance" : ...,           // ä½™é¢
	"question1" : "...",       // é—®é¢˜1
	"answer1" : "...",         // ç­”æ¡ˆ1
	"question2" : "...",       // é—®é¢˜2
	"answer2" : "...",         // ç­”æ¡ˆ2
	"registerTime" : "...",     // æ³¨å†Œæ—¶é—´ 2024-4-6 12:03:59
	"avatar":"",				//å¤´åƒ
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...", // ä¿¡æ¯
	"status" : 1       // çŠ¶æ€å€¼ 1è¡¨ç¤ºæˆåŠŸ
}
~~~

#### ç™»å½•æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /login HTTP/1.1
Host: 192.168.10.132:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Accept: application/json

{
	"phone" : "...",           // æ‰‹æœºå·
	"password" : "...",        // å¯†ç 
	"ip" : "..."               // ç™»å½•è®¾å¤‡ip
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status" : 1
}
~~~

#### å¿˜è®°å¯†ç æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /forgetPassword HTTP/1.1
Host: 192.168.1.6:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Content-Length: [len]
Accept: application/json

{
	"phone" : "..."
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",  // ä¿¡æ¯
	"status" : 1,       // çŠ¶æ€å€¼ 1è¡¨ç¤ºæˆåŠŸ
	"question1" : "...", // é—®é¢˜1
	"question2" : "..."  // é—®é¢˜2
}
~~~

#### è·å–å¤´åƒåˆ—è¡¨

è¯·æ±‚

>  GET `/getAvatarList`

å“åº”ä½“

~~~json
{
	"message" : "...",
	"status" : 1,
	"imgList":[
		{
			id:"1",
			url:"/xx.jpg"
		},
		{
			id:"2",
			url:"/xx.jpg"
		}
	]
}
~~~

#### éªŒè¯ç­”æ¡ˆæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /verifyAnswer HTTP/1.1
Host: 192.168.1.6:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Content-Length: [len]
Accept: application/json

{
	"phone" : "...",
	"answer1" : "...",
	"answer2" : "..."
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...", // ç­”æ¡ˆæ˜¯å¦æ­£ç¡®çš„ä¿¡æ¯
	"status" : 1, // çŠ¶æ€ 1è¡¨ç¤ºé—®é¢˜å›ç­”æ­£ç¡®
	"password" : "..." // å¯†ç 
}
~~~

#### è·å–ä¸ªäººä¿¡æ¯

è¯·æ±‚ï¼š

~~~http
http://192.168.10.132:9668/getUserInfo
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message"        : "...",                // ç­”æ¡ˆæ˜¯å¦æ­£ç¡®çš„ä¿¡æ¯
	"status"         : 1,                    // çŠ¶æ€ 1è¡¨ç¤ºä¿¡æ¯è·å–æˆåŠŸ
	"avatar"         : "...",                // å¤´åƒ
	"name"           : "...",                // ç”¨æˆ·å
	"password"       : "...",                // å¯†ç 
	"sex"            : "...",                // æ€§åˆ« 1è¡¨ç¤ºç”· 0è¡¨ç¤ºå¥³
	"addr"           : "...",                // ä½å€
	"phone"          : "...",                // æ‰‹æœºå·
	"registerTime"   : "...",                // æ³¨å†Œæ—¶é—´
	"balance"        : "..."                 // ä½™é¢
	"equipCtrlCount" : "",	                 // è®¾å¤‡å¯æ§æ¬¡æ•°
	"expireTime"     : "xxxx-xx-xx xx:xxxx", // ä¼šå‘˜åˆ°æœŸæ—¶é—´
	"vipgrade"       : "",	                 // vipç­‰çº§ æ•°æ®åº”æ˜¯1 || 2 ||3 .... ||8
	"accBalance"     : ""	                 // ç´¯è®¡å……å€¼é‡‘é¢
}
~~~

#### ä¿®æ”¹ä¸ªäººä¿¡æ¯

è¯·æ±‚ï¼š

~~~http
POST /updateUserInfo HTTP/1.1
Host: 192.168.1.6:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Content-Length: [len]
Accept: application/json

{
	// ä¿®æ”¹çš„å­—æ®µåŠå­—æ®µå€¼
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status" : 1
}
~~~

#### è·å–æœ€æ–°å…¬å‘Šæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
http://192.168.10.132:9668/getNewNotice
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status" : 1,
	"content" : "..."
}
~~~

#### è·å–æ‰€æœ‰å…¬å‘Šæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
http://192.168.10.132:9668/getAllNotice
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status" : 1,
	"total" : ..., 
	"notice" : [
		{
			"id" : ...,
			"title" : "...", // æ ‡é¢˜
			"message" : "...", // å…¬å‘Šå†…å®¹
			"createdAt" : "..."  // å‘å¸ƒæ—¶é—´
		},
		...
	]
}
~~~

#### è·å–è®¾å¤‡åˆ—è¡¨æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
http://192.168.10.132:9668/equipmentlist
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"totalNumber" : ... ,  // æ€»è®¾å¤‡æ•°
	"equipments"  : [      // åœ¨çº¿è®¾å¤‡åˆ—è¡¨
		{
			"id"      : "...", // è®¾å¤‡id
			"name"    : "...", // è®¾å¤‡åç§°
			"ip"      : "...", // è®¾å¤‡ipåœ°å€
			"type"    : "1/2", // è®¾å¤‡ç±»å‹ 1è¡¨ç¤ºWindowsç³»ç»Ÿ  2è¡¨ç¤ºåµŒå…¥å¼è®¾å¤‡
			"eStatus" : ...    // è®¾å¤‡çŠ¶æ€1 åœ¨çº¿ 2ç¹å¿™
		},
		{
			"id"      : "...", // è®¾å¤‡id
			"name"    : "...", // è®¾å¤‡åç§°
			...
		},
		...
	]
}
~~~

#### å‘èµ·è®¾å¤‡æ§åˆ¶æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /startEquipmentCtrl HTTP/1.1
Host: 192.168.10.132:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Accept: application/json

{
	"ctrlerPhone"     : "...", // æ§åˆ¶è€…çš„æ‰‹æœºå·
	"bectrlEquipName" : "...", // è¢«æ§è®¾å¤‡åç§°
	"startCtrlTime"   : "...", // å¼€å§‹æ§åˆ¶çš„æ—¶é—´æˆ³
	"key"             : "..."  //å¼€å¯è®¾å¤‡çš„ç§˜é’¥ ä¾‹å¦‚ï¼šsahkdas123190
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"imageDir" : "...",  // è·å–å›¾ç‰‡çš„ä½ç½®
	"eStatus"  : "...",  // è®¾å¤‡å½“å‰çš„çŠ¶æ€
	"CtrlTime" : "..."   // ç”¨æˆ·å¯æ§è®¾å¤‡æ—¶é—´ 10è¡¨ç¤º10åˆ†é’Ÿ
	
}
~~~

#### åœæ­¢è®¾å¤‡æ§åˆ¶æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /endEquipmentCtrl HTTP/1.1
Host: 192.168.10.132:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Accept: application/json

{
	"bectrlEquipName" : "...", // è¦å…³é—­è¢«æ§è®¾å¤‡çš„åç§°
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status" : ...   1åœæ­¢æˆåŠŸ  2
}
~~~

#### è®¾å¤‡æ“ä½œæ•°æ®åŒ…ï¼ˆå…³æœº/é‡å¯/åˆ é™¤ï¼‰

è¯·æ±‚ï¼š

~~~http
POST /controlEquip HTTP/1.1
Host: 192.168.10.132:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Accept: application/json

{
	ctrlerPhone : "",        // å‘èµ·æ§åˆ¶çš„æ‰‹æœºå·
	type        : "1||2||3", // æ“ä½œç±»å‹ 1ä»£è¡¨å…³æœºï¼Œ2ä»£è¡¨é‡å¯ï¼Œ3ä»£è¡¨åˆ é™¤è®¾å¤‡
	list        : [          // å‘½ä»¤åˆ—è¡¨
	{	
        "bectrlEquipName" : "...", // è®¾å¤‡åç§°
        "timeout"         : "..."  // æ—¶é—´
    },
    ...
   ]
}
~~~

åº”ç­”ï¼š

~~~json
{
	"message" : "...",  // ä¿¡æ¯
	"status"  : 1       // çŠ¶æ€å€¼ 1è¡¨ç¤ºæˆåŠŸ
}
~~~

#### é¼ æ ‡é”®ç›˜äº‹ä»¶æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
POST /ctrlEvent HTTP/1.1
Host: 192.168.10.132:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Accept: application/json

{
	"bectrlEquipName" : "...",    // è¢«æ§è®¾å¤‡åç§°
	"EventType" : ...,            // äº‹ä»¶çš„ç±»å‹ï¼ˆé¼ æ ‡äº‹ä»¶ / é”®ç›˜äº‹ä»¶ï¼‰   1è¡¨ç¤ºé¼ æ ‡äº‹ä»¶ 2è¡¨ç¤ºé”®ç›˜äº‹ä»¶
	"MousePoint" : {"x" : ..., "y" : ...},        // å…‰æ ‡ä½ç½®
	"operation" : ...,            // é¼ æ ‡é”®ç›˜äº‹ä»¶ç±»å‹ï¼ˆ[æŒ‰ä¸‹ / æŠ¬èµ· / æ»šåŠ¨][å·¦é”® / ä¸­é”® / å³é”®](åé¢åªç”¨äºé¼ æ ‡)ï¼‰  0b00010000è¡¨ç¤ºæŒ‰ä¸‹ 0b00100000è¡¨ç¤ºæŠ¬èµ· 0b01000000è¡¨ç¤ºæ»šåŠ¨ 0b00000001è¡¨ç¤ºå³é”® 0b00000010è¡¨ç¤ºä¸­é”® 0b00000100è¡¨ç¤ºå·¦é”®
	"Value" : ...              // æŒ‰ä¸‹çš„é”®å€¼
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin
~~~

é”®ç›˜äº‹ä»¶æ˜ å°„è¡¨ï¼š

|            æŒ‰é”®             | åå…­è¿›åˆ¶å€¼ | åè¿›åˆ¶å€¼ |
| :-------------------------: | :--------: | :------: |
|    BACKSPACEé”®ï¼ˆåˆ é™¤é”®ï¼‰    |    0X08    |    8     |
|             TAB             |    0X09    |    9     |
|       Enteré”®ï¼ˆå›è½¦ï¼‰       |    0X0D    |    13    |
|           SHIFTé”®           |    0X10    |    16    |
|           ctrlé”®            |    0X11    |    17    |
|            ALTé”®            |    0X12    |    18    |
|           PAUSEé”®           |    0X13    |    19    |
| CAPS LOCKé”®ï¼ˆå¤§å°å†™é”å®šé”®ï¼‰ |    0X14    |    20    |
|            ESCé”®            |    0X1B    |    27    |
|           ç©ºæ ¼é”®            |    0X20    |    32    |
|          PAGE UPé”®          |    0X21    |    33    |
|         PAGE DOWNé”®         |    0X22    |    34    |
|            ENDé”®            |    0X23    |    35    |
|           HOMEé”®            |    0X24    |    36    |
|   LEFT ARROWé”®ï¼ˆå·¦ç®­å¤´ï¼‰    |    0X25    |    37    |
|    UP ARROWé”®ï¼ˆä¸Šç®­å¤´ï¼‰     |    0X26    |    38    |
|   RIGHT ARROWé”®ï¼ˆå³ç®­å¤´ï¼‰   |    0X27    |    39    |
|   DOWN ARROWé”®ï¼ˆä¸‹ç®­å¤´ï¼‰    |    0X28    |    40    |
|          SELECTé”®           |    0X29    |    41    |
|           PRINTé”®           |    0X2A    |    42    |
|          EXECUTEé”®          |    0X2B    |    43    |
|       PRINT SCREENé”®        |    0X2C    |    44    |
|          INSERTé”®           |    0X2D    |    45    |
|          DELETEé”®           |    0X2E    |    46    |
|           HELPé”®            |    0X2F    |    47    |
|             0é”®             |    0X30    |    48    |
|             1é”®             |    0X31    |    49    |
|             2é”®             |    0X32    |    50    |
|             3é”®             |    0X33    |    51    |
|             4é”®             |    0X34    |    52    |
|             5é”®             |    0X35    |    53    |
|             6é”®             |    0X36    |    54    |
|             7é”®             |    0X37    |    55    |
|             8é”®             |    0X38    |    56    |
|             9é”®             |    0X39    |    57    |
|             Aé”®             |    0X41    |    65    |
|             Bé”®             |    0X42    |    66    |
|             Cé”®             |    0X43    |    67    |
|             Dé”®             |    0X44    |    68    |
|             Eé”®             |    0X45    |    69    |
|             Fé”®             |    0X46    |    70    |
|             Gé”®             |    0X47    |    71    |
|             Hé”®             |    0X48    |    72    |
|             Ié”®             |    0X49    |    73    |
|             Jé”®             |    0X4A    |    74    |
|             Ké”®             |    0X4B    |    75    |
|             Lé”®             |    0X4C    |    76    |
|             Mé”®             |    0X4D    |    77    |
|             Né”®             |    0X4E    |    78    |
|             Oé”®             |    0X4F    |    79    |
|             Pé”®             |    0X50    |    80    |
|             Qé”®             |    0X51    |    81    |
|             Ré”®             |    0X52    |    82    |
|             Sé”®             |    0X53    |    83    |
|             Té”®             |    0X54    |    84    |
|             Ué”®             |    0X55    |    85    |
|             Vé”®             |    0X56    |    86    |
|             Wé”®             |    0X57    |    87    |
|             Xé”®             |    0X58    |    88    |
|             Yé”®             |    0X59    |    89    |
|             Zé”®             |    0X5A    |    90    |
|            å·¦win            |    0X5B    |    91    |
|            å³win            |    0X5C    |    92    |
|         æ•°å­—é”®ç›˜0é”®         |    0X60    |    96    |
|         æ•°å­—é”®ç›˜1é”®         |    0X61    |    97    |
|         æ•°å­—é”®ç›˜2é”®         |    0X62    |    98    |
|         æ•°å­—é”®ç›˜3é”®         |    0X63    |    99    |
|         æ•°å­—é”®ç›˜4é”®         |    0X64    |   100    |
|         æ•°å­—é”®ç›˜5é”®         |    0X65    |   101    |
|         æ•°å­—é”®ç›˜6é”®         |    0X66    |   102    |
|         æ•°å­—é”®ç›˜7é”®         |    0X67    |   103    |
|         æ•°å­—é”®ç›˜8é”®         |    0X68    |   104    |
|         æ•°å­—é”®ç›˜9é”®         |    0X69    |   105    |
|           ä¹˜å·é”®            |    0X6A    |   106    |
|           åŠ å·é”®            |    0X6B    |   107    |
|          åˆ†éš”ç¬¦é”®           |    0X6C    |   108    |
|           å‡å·é”®            |    0X6D    |   109    |
|           å¥ç‚¹é”®            |    0X6E    |   110    |
|           é™¤å·é”®            |    0X6F    |   111    |
|            F1é”®             |    0X70    |   112    |
|            F2é”®             |    0X71    |   113    |
|            F3é”®             |    0X72    |   114    |
|            F4é”®             |    0X73    |   115    |
|            F5é”®             |    0X74    |   116    |
|            F6é”®             |    0X75    |   117    |
|            F7é”®             |    0X76    |   118    |
|            F8é”®             |    0X77    |   119    |
|            F9é”®             |    0X78    |   120    |
|            F10é”®            |    0X79    |   121    |
|            F11é”®            |    0X7A    |   122    |
|            F12é”®            |    0X7B    |   123    |
|            F13é”®            |    0X7C    |   124    |
|            F14é”®            |    0X7D    |   125    |
|            F15é”®            |    0X7E    |   126    |
|            F16é”®            |    0X7F    |   127    |
|            F17é”®            |    0X80    |   128    |
|            F18é”®            |    0X81    |   129    |
|            F19é”®            |    0X82    |   130    |
|            F20é”®            |    0X83    |   131    |
|            F21é”®            |    0X84    |   132    |
|            F22é”®            |    0X85    |   133    |
|            F23é”®            |    0X86    |   134    |
|            F24é”®            |    0X87    |   135    |
|         NUM LOCKé”®          |    0X90    |   144    |
|        SCROLL LOCKé”®        |    0X91    |   145    |
|           å·¦shift           |    0XA0    |   160    |
|           å³shift           |    0XA1    |   161    |
|           å·¦ctrl            |    0XA2    |   162    |
|           å³ctrl            |    0XA3    |   163    |
|            å·¦ALT            |    0XA4    |   164    |
|            å³ALT            |    0XA5    |   165    |

#### æŒ‡å®šè®¾å¤‡æ–‡ä»¶é¢„è§ˆæ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~json
{
    "auth"   : "...",             // æ‰‹æœºå·
    "opType" : "0/1/2/3/4/5/6/7", // æ“ä½œç±»å‹ ä¸Šçº¿/æ–‡ä»¶æµè§ˆ/åˆ é™¤/æ–°å»º/è¿è¡Œ/é‡å‘½å/ä¸Šä¼ /ä¸‹è½½
    "EName"  : "...",             // è®¾å¤‡å
    "dir"    : "..."              // ç›®å½•ç»å¯¹è·¯å¾„
}
~~~

åº”ç­”ï¼š

~~~json
{
    "equip" : "...",  // è¡¨ç¤ºè¿™ä¸ªæ˜¯è®¾å¤‡çš„æ•°æ®
    "toCtrl" : "...", // è¦å°†æ•°æ®å‘é€ç»™çš„æ§åˆ¶ç«¯
    "list":[
    {
        "type":"1/2",  // æ–‡ä»¶/æ–‡ä»¶å¤¹
        "label":"..."  // æ–‡ä»¶å
    },
    ...
    ]
}
~~~

ä¸¾ä¸ªğŸŒ°ï¼š

 <img src="README.assets/image-20240622115143481.png" alt="image-20240622115143481" style="zoom:80%;" />

#### æŒ‡å®šè®¾å¤‡æ–‡ä»¶åˆ é™¤ã€è¿è¡Œã€é‡å‘½åã€æ–°å»ºæ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~json
{
    "auth"   : "...",           // æ‰‹æœºå·
    "opType" : "0/1/2/3/4/5/6/7", // æ“ä½œç±»å‹ ä¸Šçº¿/æ–‡ä»¶æµè§ˆ/åˆ é™¤/æ–°å»º/è¿è¡Œ/é‡å‘½å/ä¸Šä¼ /ä¸‹è½½
    "EName"  : "...",           // è®¾å¤‡å
    "dir"    : "..."            // ç›®å½•ç»å¯¹è·¯å¾„
}
~~~

åº”ç­”ï¼š

~~~json
{
    "toCtrl" : "...", // è¦å°†æ•°æ®å‘é€ç»™çš„æ§åˆ¶ç«¯
    "message" : "...",  // æ˜¯å¦æˆåŠŸå¤±è´¥
    "status"  : "1"     // çŠ¶æ€å€¼
}
~~~

#### å‘èµ·æ–‡ä»¶ä¸‹è½½æ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~json
{
    "auth"   : "...",           // æ‰‹æœºå·
    "opType" : "0/1/2/3/4/5/6/7", // æ“ä½œç±»å‹ ä¸Šçº¿/æ–‡ä»¶æµè§ˆ/åˆ é™¤/æ–°å»º/è¿è¡Œ/é‡å‘½å/ä¸Šä¼ /ä¸‹è½½
    "EName"  : "...",           // è®¾å¤‡å
    "dir"    : "..."            // æ–‡ä»¶ç»å¯¹è·¯å¾„
}
~~~

åº”ç­”ï¼š

~~~json
{
    "toCtrl"    : "...",   // è¦å°†æ•°æ®å‘é€ç»™çš„æ§åˆ¶ç«¯
	"bNext"     : "0/1",   // æ˜¯å¦æœ‰åç»­  0è¡¨ç¤ºæ²¡æœ‰/1è¡¨ç¤ºæœ‰
    "totalSize" : ...,     // æ–‡ä»¶æ€»å¤§å°
    "Size"      : ...,     // æœ¬æ¬¡åˆ†ç‰‡å¤§å°
    "data"      : "..."    // æ–‡ä»¶æ•°æ®äºŒè¿›åˆ¶å½¢åŠ¿
}
~~~

ä¸¾ä¸ªğŸŒ°ï¼š

~~~c++
// ä¸Šçº¿åŒ…
{
    "auth"   : "15046543174",
    "opType" : "0"
}
// ä¸‹è½½æŒ‡å®šè·¯å¾„ä¸‹æ–‡ä»¶
{
    "auth"   : "15046543174",
    "opType" : "7",
    "EName"  : "sb1",
    "dir"    : "E:\\hacker.ico"
}
~~~

#### å‘èµ·æ–‡ä»¶ä¸Šä¼ æ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~json
{
    "auth"   : "...",           // æ‰‹æœºå·
    "opType" : "0/1/2/3/4/5/6/7", // æ“ä½œç±»å‹ ä¸Šçº¿/æ–‡ä»¶æµè§ˆ/åˆ é™¤/æ–°å»º/è¿è¡Œ/é‡å‘½å/ä¸Šä¼ /ä¸‹è½½
	"EName"  : "...",           // è®¾å¤‡å
    "bNext"  : "0/1",           // æ˜¯å¦æœ‰åç»­  0è¡¨ç¤ºæ²¡æœ‰/1è¡¨ç¤ºæœ‰
    "dir"    : "...",           // æ–‡ä»¶ç»å¯¹è·¯å¾„
    "data"   : "..."            // æ–‡ä»¶æ•°æ®äºŒè¿›åˆ¶æ ¼å¼
}
~~~

åº”ç­”ï¼š

~~~json
{
    "toCtrl" : "...", // è¦å°†æ•°æ®å‘é€ç»™çš„æ§åˆ¶ç«¯
    "message" : "...",
    "status"  : "1"
}
~~~

#### æ•°æ®å¤§å±â€”è®¿é—®é‡åŠå½“å‰ç”¨æˆ·ç™»å½•ä¿¡æ¯æ•°æ®åŒ…

è¯·æ±‚ï¼š

> `GET /dataSummary`

åº”ç­”ï¼š

~~~json
{
	"message"         : "...",     // æˆåŠŸsuccess || error
	"status"          : 1,         // çŠ¶æ€å€¼ 1è¡¨ç¤ºæˆåŠŸ
	"visitTotal"      : xxx,       // æ€»è®¿é—®é‡
	"weekPerDayToatl" : [...,...], // å‘¨è®¿é—®é‡ï¼ˆæ¯å¤©ï¼‰
	"registerCount"   : xxx,       // æ³¨å†Œäººæ•°
	"historyList"     : [          // å†å²ç™»å½•è®°å½•ï¼ˆå½“å‰ç”¨æˆ·çš„ï¼‰
		{
			ip      : "",                   // ç™»å½•ip
			date    : "xxx-xx-xx xx:xx:xx", // å†å²ç™»å½•æ—¶é—´
			address : "é»‘é¾™æ±Ÿçœå“ˆå°”æ»¨å¸‚"       // ç™»å½•åœ°å€ çœå¸‚
		},
        ...
	]
}
~~~

#### æ•°æ®å¤§å±â€”å½“å‰åœ¨çº¿äººæ•°ç»Ÿè®¡æ•°æ®åŒ…

è¯·æ±‚ï¼š

> `GET /currentOnline`

åº”ç­”ï¼š

~~~json
{
	"message" : "...", // æˆåŠŸsuccess || error
	"status"  : 1,     // çŠ¶æ€å€¼ 1è¡¨ç¤ºæˆåŠŸ
	"online"  : xxx    //å½“å‰åœ¨çº¿æ•°
}
~~~

#### æ•°æ®å¤§å±â€”è·å–æ‰€æœ‰æ³¨å†Œè®¾å¤‡æ•°æ®åŒ…

è¯·æ±‚ï¼š

> `GET /getEquipAll`

åº”ç­”ï¼š

~~~json
{
    "list":[
       {
           "eName"   : "...",     // è®¾å¤‡å
           "llitude" : [...,...], // ç»çº¬åº¦
           "status"  : 0|1|2      // çŠ¶æ€ 0è¡¨ç¤ºç¦»çº¿ 1è¡¨ç¤ºåœ¨çº¿ 2è¡¨ç¤ºæ­£åœ¨è¢«æ§åˆ¶
       },
       ...
    ]
}
~~~

#### æ•°æ®å¤§å±â€”æ­£è¢«æ§è®¾å¤‡çŠ¶æ€æŒ‡å‘æ•°æ®åŒ…

è¯·æ±‚ï¼š

> `GET /ctrlTobeCtrl`

å“åº”ï¼š

~~~json
{
    "list":[
         {	
             "coords":[
             	[126.642464, 45.756967], 
             	[119.306239, 26.075302]
             ]	//æ§åˆ¶ç«¯èµ·ç‚¹ç»çº¬åº¦ï¼Œè¢«æ§ç«¯ç»ˆç‚¹ç»çº¬åº¦
         },
         {
             "coords":[
                 [126.642464, 45.756967], 
                 [119.306239, 26.075302]
             ]	//æ§åˆ¶ç«¯èµ·ç‚¹ç»çº¬åº¦ï¼Œè¢«æ§ç«¯ç»ˆç‚¹ç»çº¬åº¦
         }
         ...
    ]
}
~~~

#### æ•°æ®å¤§å±â€”è·å–å½“å‰ä½ç½®çš„å¤©æ°”æ•°æ®åŒ…

è¯·æ±‚ï¼š

> `GET /getWeather?ip=...`

å—æ”¯æŒAPIæ¥å£ï¼šhttp://api.lolimi.cn/API/weather/?city=åŒ—äº¬

å—æ”¯æŒAPIæ¥å£ï¼šhttp://api.map.baidu.com/location/ip?ip=111.206.214.37&coor=bd09ll&ak=æ‚¨çš„AK

åº”ç­”ï¼š

~~~json
{
  "code": 1,
  "text": "è·å–æˆåŠŸ",
  "data": {
    "city": "å¤§åº†",
    "cityEnglish": "daqing",
    "temp": "13",
    "tempn": "14",
    "weather": "æ™´è½¬å¤šäº‘",
    "wind": "è¥¿åŒ—é£è½¬è¥¿é£",
    "windSpeed": "3-4çº§è½¬\u003C3çº§",
    "time": "2024-05-18 08:00",
    "warning": {

    },
    "current": {
      "city": "å¤§åº†",
      "cityEnglish": "daqing",
      "humidity": "24%",
      "wind": "è¥¿åŒ—é£",
      "windSpeed": "2çº§",
      "visibility": "30km",
      "weather": "å¤šäº‘",
      "weatherEnglish": "Cloudy",
      "temp": "17",
      "fahrenheit": "62.6",
      "air": "30",
      "air_pm25": "30",
      "date": "05æœˆ18æ—¥(æ˜ŸæœŸå…­)",
      "time": "17:05",
      "image": "http://api.lolimi.cn/API/weather/cache/image/å¤šäº‘.png"
    },
    "living": [
      {
        "name": "è·¯å†µæŒ‡æ•°",
        "index": "å¹²ç‡¥",
        "tips": "å¤©æ°”è¾ƒå¥½ï¼Œè·¯é¢è¾ƒå¹²ç‡¥ï¼Œè·¯å†µè¾ƒå¥½ã€‚"
      },
      {
        "name": "æ™¨ç»ƒæŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "éƒ¨åˆ†åœ°é¢è¾ƒæ¹¿æ»‘ï¼Œé€‰æ‹©åˆé€‚çš„åœ°ç‚¹æ™¨ç»ƒã€‚"
      },
      {
        "name": "ç©ºæ°”æ±¡æŸ“æ‰©æ•£æ¡ä»¶æŒ‡æ•°",
        "index": "è‰¯",
        "tips": "æ°”è±¡æ¡ä»¶æœ‰åˆ©äºç©ºæ°”æ±¡æŸ“ç‰©æ‰©æ•£ã€‚"
      },
      {
        "name": "é€›è¡—æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "è¿™ç§å¥½å¤©æ°”å»é€›è¡—å¯ä½¿èº«å¿ƒç•…å¿«æ”¾æ¾ã€‚"
      },
      {
        "name": "èˆ’é€‚åº¦æŒ‡æ•°",
        "index": "è¾ƒèˆ’é€‚",
        "tips": "ç™½å¤©æ™´å¥½ï¼Œæ—©æ™šåå‡‰ï¼Œåˆåèˆ’é€‚ã€‚"
      },
      {
        "name": "å•¤é…’æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "é€‚é‡çš„é¥®ç”¨å•¤é…’ï¼Œæ³¨æ„ä¸è¦è¿‡é‡ã€‚"
      },
      {
        "name": "åˆ’èˆ¹æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "é£ç¨å¤§ä¼šå¯¹åˆ’èˆ¹äº§ç”Ÿä¸€å®šå½±å“ã€‚"
      },
      {
        "name": "å¤ªé˜³é•œæŒ‡æ•°",
        "index": "å¿…è¦",
        "tips": "å»ºè®®ä½©æˆ´é€å°„æ¯”ä¸º1çº§çš„é®é˜³é•œ"
      },
      {
        "name": "ç´«å¤–çº¿å¼ºåº¦æŒ‡æ•°",
        "index": "å¾ˆå¼º",
        "tips": "æ¶‚æ“¦SPF20ä»¥ä¸Šï¼ŒPA++æŠ¤è‚¤å“ï¼Œé¿å¼ºå…‰ã€‚"
      },
      {
        "name": "é£å¯’æŒ‡æ•°",
        "index": "æ— ",
        "tips": "æ¸©åº¦æœªè¾¾åˆ°é£å¯’æ‰€éœ€çš„ä½æ¸©ï¼Œç¨ä½œé˜²å¯’å‡†å¤‡å³å¯ã€‚"
      },
      {
        "name": "ç©¿è¡£æŒ‡æ•°",
        "index": "è¾ƒå†·",
        "tips": "å»ºè®®ç€åšå¤–å¥—åŠ æ¯›è¡£ç­‰æœè£…ã€‚"
      },
      {
        "name": "æ”¾é£ç­æŒ‡æ•°",
        "index": "é€‚å®œ",
        "tips": "å¥½å¤©æ°”ï¼Œæ”¾é£ç­å¯ä»¥èˆ’å±•ç­‹éª¨æ”¾æ¾èº«å¿ƒã€‚"
      },
      {
        "name": "ç©ºè°ƒå¼€å¯æŒ‡æ•°",
        "index": "è¾ƒå°‘å¼€å¯",
        "tips": "ä½“æ„Ÿèˆ’é€‚ï¼Œä¸éœ€è¦å¼€å¯ç©ºè°ƒã€‚"
      },
      {
        "name": "é’“é±¼æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "é£ç¨å¤§ä¼šå¯¹å‚é’“äº§ç”Ÿä¸€å®šå½±å“ã€‚"
      },
      {
        "name": "æ™¾æ™’æŒ‡æ•°",
        "index": "é€‚å®œ",
        "tips": "å¤©æ°”ä¸é”™ï¼ŒæŠ“ç´§æ—¶æœºè®©è¡£ç‰©æ™’å¤ªé˜³å§ã€‚"
      },
      {
        "name": "æ„Ÿå†’æŒ‡æ•°",
        "index": "ææ˜“å‘",
        "tips": "å¼ºé™æ¸©ï¼Œææ˜“æ„Ÿå†’ã€‚"
      },
      {
        "name": "æ´—è½¦æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "æ— é›¨ä¸”é£åŠ›è¾ƒå°ï¼Œæ˜“ä¿æŒæ¸…æ´åº¦ã€‚"
      },
      {
        "name": "æ—…æ¸¸æŒ‡æ•°",
        "index": "é€‚å®œ",
        "tips": "é£ç¨å¤§ï¼Œä½†ä»å¯å°½æƒ…äº«å—å¤§è‡ªç„¶é£å…‰ã€‚"
      },
      {
        "name": "å¤œç”Ÿæ´»æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "åªè¦æ‚¨ç¨ä½œå‡†å¤‡å°±å¯ä»¥æ”¾å¿ƒå¤–å‡ºã€‚"
      },
      {
        "name": "å¿ƒæƒ…æŒ‡æ•°",
        "index": "å¥½",
        "tips": "å¥½å¤©æ°”ä¼šå¸¦æ¥ä¸€å¤©çš„å¥½å¿ƒæƒ…ã€‚"
      },
      {
        "name": "çº¦ä¼šæŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "ä¸ç”¨æ‹…å¿ƒå¤©æ°”æ¥è°ƒçš®æ£ä¹±è€Œå½±å“äº†å…´è‡´ã€‚"
      },
      {
        "name": "è¿åŠ¨æŒ‡æ•°",
        "index": "è¾ƒé€‚å®œ",
        "tips": "é£åŠ›ç¨å¼ºï¼Œæ¨èæ‚¨è¿›è¡Œå®¤å†…è¿åŠ¨ã€‚"
      },
      {
        "name": "è¿‡æ•æŒ‡æ•°",
        "index": "è¾ƒæ˜“å‘",
        "tips": "éœ€æ³¨æ„è¿œç¦»è¿‡æ•æºï¼Œé€‚å½“é‡‡å–é˜²æŠ¤æªæ–½ã€‚"
      },
      {
        "name": "ç¾å‘æŒ‡æ•°",
        "index": "ä¸€èˆ¬",
        "tips": "æ³¨æ„æ¸…æ´ï¼Œå»ºè®®é€‰ç”¨é˜²æ™’æ»‹æ¶¦å‹æŠ¤å‘å“ã€‚"
      },
      {
        "name": "é›¨ä¼æŒ‡æ•°",
        "index": "ä¸å¸¦ä¼",
        "tips": "å¤©æ°”è¾ƒå¥½ï¼Œä¸ç”¨å¸¦é›¨ä¼ã€‚"
      },
      {
        "name": "é˜²æ™’æŒ‡æ•°",
        "index": "æå¼º",
        "tips": "éœ€æ¶‚æ“¦SPFå¤§äº20ï¼ŒPA++ï¼ŒæŠ¤è‚¤å“ã€‚"
      },
      {
        "name": "åŒ–å¦†æŒ‡æ•°",
        "index": "é˜²æ™’",
        "tips": "è¯·é€‰ç”¨ä¸­æ€§ä¿æ¹¿å‹åŒ–å¦†å“ã€‚"
      },
      {
        "name": "ä¸­æš‘æŒ‡æ•°",
        "index": "æ— ä¸­æš‘é£é™©",
        "tips": "å¤©æ°”ä¸çƒ­ï¼Œåœ¨ç‚ç‚å¤æ—¥ä¸­ååˆ†éš¾å¾—ï¼Œå¯ä»¥å‘Šåˆ«æš‘æ°”æ¼«æ¼«å•¦~"
      },
      {
        "name": "äº¤é€šæŒ‡æ•°",
        "index": "è‰¯å¥½",
        "tips": "æ°”è±¡æ¡ä»¶è‰¯å¥½ï¼Œè½¦è¾†å¯ä»¥æ­£å¸¸è¡Œé©¶ã€‚"
      },
      {
        "name": "å¹²ç‡¥æŒ‡æ•°",
        "index": "å¹²ç‡¥",
        "tips": "é£é€Ÿåå¤§ï¼Œç©ºæ°”å¹²ç‡¥ï¼Œçš®è‚¤æ°´åˆ†æµå¤±å¿«ï¼Œåº”å‡å°‘çš®è‚¤æš´éœ²åœ¨å¤–é¢ç§¯ï¼›å¤šå–æ°´è¡¥å……èº«ä½“æ°´åˆ†ï¼ŒåŒæ—¶æ¶‚æŠ¹ä¿æ¹¿æ»‹æ¶¦å‹æŠ¤è‚¤å“ã€‚"
      }
    ]
  }
}
~~~

### è¢«æ§ç«¯â†â†’æœåŠ¡å™¨é€šä¿¡åè®®å°è£…ï¼ˆåŒ…æ‹¬HTTPè¯·æ±‚åŒ…&åº”ç­”åŒ…ï¼‰

#### ç™»å½•æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~http
GET /bectrlOnline HTTP/1.1
Host: 192.168.1.6:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Content-Length: [len]
Accept: application/json

{
	"equipName" : "...",
	"type" : "1/2",    // è®¾å¤‡ç±»å‹1è¡¨ç¤ºWindowsè®¾å¤‡  2è¡¨ç¤ºåµŒå…¥å¼
	"width" : "...",
	"height" : "...",
	"phone" : "...",
	"password" : "..."
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status"  : 0
}
~~~

#### è¢«æ§ç«¯ä¸‹çº¿

è¯·æ±‚ï¼š

~~~http
GET /bectrlDownline HTTP/1.1
Host: 192.168.1.6:9668
Content-Type: application/json
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36
Content-Length: [len]
Accept: application/json

{
	"equipName" : "..."
}
~~~

åº”ç­”ï¼š

~~~http
HTTP/1.1 200 OK
Date: Wed, 03 Apr 2024 10:47:04 GMT
Server: CrossTimeServer/1.0
Content-Type: text/html; charset=utf-8
X-Frame-Options: DENY
Access-Control-Allow-Origin: * // è·¨åŸŸæ‰€ç”¨
Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: *
Connection: keep-alive  // ä¿æŒé•¿è¿æ¥æ‰€ç”¨
Keep-Alive: timeout=100s
Cache-Control: no-cache // è®¾ç½®æµè§ˆå™¨æ— ç¼“å†²æ‰€ç”¨
Content-Length: [len]
X-Content-Type-Options: nosniff
Referrer-Policy: same-origin

{
	"message" : "...",
	"status"  : 0
}
~~~

#### å¼€å¯å±å¹•ç›‘æ§æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
[0xFEFF][1][ç«¯å£å·][length][æ–‡ä»¶å][æ ¡éªŒå’Œ]
~~~

åº”ç­”ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
[0xFEFF][1][num][length][è®¾å¤‡æ•°æ®][æ ¡éªŒå’Œ]
~~~

#### åœæ­¢å±å¹•ç›‘æ§æ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
[0xFEFF][2][2][length][NULL][æ ¡éªŒå’Œ]
~~~

åº”ç­”ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
æš‚æ— è¿”å›æ•°æ®
~~~

#### é¼ æ ‡é”®ç›˜æ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
[0xFEFF][3][3][length][MKEventæ•°æ®][æ ¡éªŒå’Œ]
~~~

åº”ç­”ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
æš‚æ— è¿”å›æ•°æ®
~~~

#### è®¾å¤‡å…³æœºæ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
[0xFEFF][4][4][length][NULL][æ ¡éªŒå’Œ]
~~~

åº”ç­”ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
æš‚æ— è¿”å›æ•°æ®
~~~

#### è®¾å¤‡é‡å¯æ“ä½œæ•°æ®åŒ…

è¯·æ±‚ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
[0xFEFF][5][5][length][NULL][æ ¡éªŒå’Œ]
~~~

åº”ç­”ï¼š

~~~c++
// [åŒ…å¤´][å‘½ä»¤å·][æ•°å­—][é•¿åº¦][æ•°æ®][æ ¡éªŒå’Œ]
æš‚æ— è¿”å›æ•°æ®
~~~

### CTCtrlåå°â†â†’æœåŠ¡å™¨é€šä¿¡åè®®å°è£…ï¼ˆåŒ…æ‹¬HTTPè¯·æ±‚åŒ…&åº”ç­”åŒ…ï¼‰

#### ç®¡ç†å‘˜ç™»å½•

> `GET /back/login?phone=...&password=...`

å“åº”ä½“

```json
{
	"message" : "...",
	"status" : 1
}
```

#### è·å–ç”¨æˆ·åˆ—è¡¨(åˆ†é¡µ)

> GET /back/getUserList?page=1&pageSize=10    
>
> page=1ä»£è¡¨è®¿é—®ç¬¬ä¸€é¡µæ•°æ®
>
> pageSize=10ä»£è¡¨æ¯é¡µæ˜¾ç¤º10æ¡æ•°æ®

å“åº”ä½“

```json
{
	"message":"...",
	"status":1,//æˆåŠŸ
	"data"ï¼š{
		"list":[
			{
    			//ä»¥ä¸‹æ²¡æœ‰çš„å€¼ä¸º-
				"userId"            :"user-xxx",           // ç”¨æˆ·id
				"username"          :"xxx",                // ç”¨æˆ·å
				"sex"               :0|1|2,                // 0ä»£è¡¨å¥³ï¼Œ1ä»£è¡¨ç”·ï¼Œ2ä»£è¡¨ä¸æ„¿é€éœ²
				"address"           :"é»‘é¾™æ±Ÿçœ,å“ˆå°”æ»¨å¸‚,é“å¤–åŒº",// åœ°å€
				"phone"             :"12345678910",        // æ‰‹æœºå·
				"registerTime"      :"2024-04-05 20:13:14",// æ³¨å†Œæ—¶é—´
				"vipStatus"         :1|0,                  // vipçš„çŠ¶æ€ï¼Œ1ä»£è¡¨æ¿€æ´»ï¼Œ0ä»£è¡¨æœªæ¿€æ´»
				"vipLevel"          :1|2|3|4|5,            // vipçš„ç­‰çº§  1 2 3 4 5çº§
 			    "expirationDate"    :"2022-12-22 12:00:00" // vipåˆ°æœŸæ—¶é—´
   			    "balance"           :"$100.00",            // ä½™é¢
				"totalRecharge"     :"$500.00",            // ç´¯è®¡å……å€¼
				"deviceControlTime" :""                    // è®¾å¤‡å¯æ§å¤©æ•°
				"controlCount"      :xxx,                  // å¯æ§æ¬¡æ•°
				"remainingCount"    :xxx,                  // å‰©ä½™æ¬¡æ•°
    			"forbidden"         :true/false,           // ç”¨æˆ·ç¦ç”¨æ ‡å¿— trueè¡¨ç¤ºç¦ç”¨ falseè¡¨ç¤ºå¯ç”¨
    			"expire"            :true/false            // ç”¨æˆ·åœç”¨æ ‡å¿— trueè¡¨ç¤ºåœç”¨ falseè¡¨ç¤ºæœªåœç”¨
			},
			{
			...
			},
			...
		],
		total://æ€»é¡µæ•°
	}
}
```

#### æ ¹æ®åœ°å€ç­›é€‰ç”¨æˆ·ä¿¡æ¯

> GRT /back/searchUserList?address=xxx

å“åº”ä½“

```json
{
	"message":"...",
	"status":1,//æˆåŠŸ
	"data"ï¼š{
		"list":[
			{
				"userId"            :"user-xxx", //ç”¨æˆ·id
				"username"          :"xxx",//ç”¨æˆ·å
				"sex"               :0|1|2,  //0ä»£è¡¨å¥³ï¼Œ1ä»£è¡¨ç”·ï¼Œ2ä»£è¡¨ä¸æ„¿é€éœ²
				"address"           :"é»‘é¾™æ±Ÿçœ,å“ˆå°”æ»¨å¸‚,é“å¤–åŒº",
				"phone"             :"12345678910",
				"registerTime"      :"2024-04-05 20:13:14", // æ³¨å†Œæ—¶é—´
    			//ä»¥ä¸‹æ²¡æœ‰çš„å€¼ä¸º-
				"vipStatus"         :1|0, //vipçš„çŠ¶æ€ï¼Œ1ä»£è¡¨æ¿€æ´»ï¼Œ0ä»£è¡¨æœªæ¿€æ´»
				"vipLevel"          :1|2|3|4|5, //vipçš„ç­‰çº§  1 2 3 4 5çº§
 			    "expirationDate"    :"2022-12-22 12:00:00" //vipåˆ°æœŸæ—¶é—´
   			    "balance"           :"$100.00",//ä½™é¢
				"totalRecharge"     :"$500.00",//ç´¯è®¡å……å€¼
				"deviceControlTime" :"", // è®¾å¤‡å¯æ§å¤©æ•°
				"controlCount"      :xxx,//å¯æ§æ¬¡æ•°
				"remainingCount"    :xxx,//å‰©ä½™æ¬¡æ•°
			},
			{
			...
			},
			...
		],
	}
}
```

#### ç”¨æˆ·åˆ é™¤,ç¦ç”¨,å¯ç”¨æ¥å£

> POST /back/operateUser

è¯·æ±‚ä½“

```json
{
    "userIds" :["user-xxx", ...],         //ç”¨æˆ·id
    "type"    :"delete/disabled/enabled"  //åˆ é™¤|ç¦ç”¨|å¯ç”¨
}
```

å“åº”ä½“

```json
{
	"message" : "...",
	"status"  : 1
}
```

#### è·å–å·²åŒæ„çš„è®¾å¤‡åˆ—è¡¨(åˆ†é¡µ)

> GET /back/getDevicesList?page=1&pageSize=10    
>
> page=1ä»£è¡¨è®¿é—®ç¬¬ä¸€é¡µæ•°æ®
>
> pageSize=10ä»£è¡¨æ¯é¡µæ˜¾ç¤º10æ¡æ•°æ®

å“åº”ä½“

```json
{
	"message" :"...",
	"status"  :1,    //æˆåŠŸ
	"data"    :{
		"list":[
			{
				"devicesId"   : "dev-xxx",          //è®¾å¤‡id
          	    "devicesName" : "xxx",              //è®¾å¤‡å
       		    "userId"      : "user-xxx",         //æ‰€å±ç”¨æˆ·id
       		    "secretKey"   : "1234567890ABCDEF", //ç§˜é’¥
			},
			...
		],
		total://æ€»é¡µæ•°
	}
}
```

#### æ ¹æ®ç”¨æˆ·idç­›é€‰å·²åŒæ„çš„è®¾å¤‡ä¿¡æ¯

> GET /back/searchDevicesList?userId=user-xxx

å“åº”ä½“

```json
{
	"message" : "...",
	"status"  : 1,     //æˆåŠŸ
	"data"    : {
		"list":[
			{
				"devicesId"   : "dev-xxx",//è®¾å¤‡id
          	    "devicesName" : "xxx",//è®¾å¤‡å
       		    "userId"      : "user-xxx",//æ‰€å±ç”¨æˆ·id
       		    "secretKey"   : "1234567890ABCDEF",//ç§˜é’¥
			},
			{
			...
			},
			...
		],
	}
}
```

#### åˆ é™¤å·²åŒæ„çš„è®¾å¤‡ä¿¡æ¯

> DELETE /back/deleteDevices

è¯·æ±‚ä½“

```json
{
    "devicesIds": ["dev-xxx", ...] //è®¾å¤‡id
}
```

å“åº”ä½“

```
{
	"message" : "...",
	"status"  : 1
}
```

#### è·å–æœªå¤„ç†çš„ç”³è¯·è®¾å¤‡

> GET /back/getApplyDevices
>

å“åº”ä½“

```json
{
	"message":"...",
	"status":1,//æˆåŠŸ
	"data"ï¼š{
		"list":[
			{
				"devicesId"   : "dev-xxx",             //è®¾å¤‡id
          	    "devicesName" : "xxx",                 //è®¾å¤‡å
       		    "userId"      : "user-xxx",            //æ‰€å±ç”¨æˆ·id
       		    "secretKey"   : "1234567890ABCDEF",    //ç§˜é’¥
      		    "applyTime"   : "2024-04-05 20:13:14", //ç”³è¯·æ—¶é—´
			},
			...
		],
	}
}
```

#### å¤„ç†è®¾å¤‡ç”³è¯·

> POST /back/applyDevices
>

è¯·æ±‚ä½“

```json
{
    "devicesId" : ["user-xxx", ...], //è®¾å¤‡id
    "type"      : "approve/reject"   //åŒæ„|æ‹’ç»
}
```

å“åº”ä½“

```
{
	"message" : "...",
	"status"  : 1
}
```

#### è·å–é€šçŸ¥åˆ—è¡¨(åˆ†é¡µ)

> GET /back/getNoticeList?page=1&pageSize=10    
>
> page=1ä»£è¡¨è®¿é—®ç¬¬ä¸€é¡µæ•°æ®
>
> pageSize=10ä»£è¡¨æ¯é¡µæ˜¾ç¤º10æ¡æ•°æ®

å“åº”ä½“

```json
{
	"message" : "...",
	"status" : 1,
	"data":{
		"list":[
			{
				"noticeId":"ad-xxx",//é€šçŸ¥id
                "admId":"adm-xxx",//å‘å¸ƒçš„ç®¡ç†å‘˜id
				"title":"é€šçŸ¥æ ‡é¢˜",
				"content":"é€šçŸ¥å†…å®¹",
				"createTime":"2024-04-05 20:13:14",//é€šçŸ¥åˆ›å»ºæ—¶é—´
                "updateTime":"2024-04-05 20:13:14"//é€šçŸ¥æ›´æ–°æ—¶é—´,æ²¡æœ‰æ›´æ–°è¿‡çš„å€¼ä¸º-
			},
			...
		],
		total:"xxx"	
	}
}
```

#### é€šçŸ¥å‘å¸ƒ

> POST /back/issueNotice

è¯·æ±‚ä½“

```json
{
    "phone":"12345678910",//æ‰‹æœºå·
	"title":"é€šçŸ¥æ ‡é¢˜",
	"content":"é€šçŸ¥å†…å®¹",
	"createTime":"2024-04-05 20:13:14"//é€šçŸ¥åˆ›å»ºæ—¶é—´
}
```

å“åº”ä½“

```json
{
	"message" : "...",
	"status" : 1
}
```

#### é€šçŸ¥æ›´æ”¹

> POST  /back/updateNotice

è¯·æ±‚ä½“

```json
{
    "noticeId":"ad-xxx",//é€šçŸ¥id
	"title":"é€šçŸ¥æ ‡é¢˜", //å¯é€‰
	"content":"é€šçŸ¥å†…å®¹", //å¯é€‰
    "updateTime":"2024-04-05 20:13:14"//é€šçŸ¥æ›´æ–°æ—¶é—´
}
```

å“åº”ä½“

```json
{
	"message" : "...",
	"status"  : 1
}
```

#### é€šçŸ¥åˆ é™¤

> DELETE  /back/deleteNotice

è¯·æ±‚ä½“

```json
{
    "noticeIds": ["ad-xxx", ...]//é€šçŸ¥id
}
```

å“åº”ä½“

```
{
	"message" : "...",
	"status"  : 1
}
```

### è·¨æ—¶ç©ºæ§åˆ¶å°è¢«æ§ç«¯

#### å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶æ ·ä¾‹

è¯¥é…ç½®æ–‡ä»¶ç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯å¦è®°ä½å¯†ç ï¼Œæ˜¯å¦è‡ªåŠ¨ç™»å½•

æ¯”å¦‚è¿˜æœ‰ä¸€äº›è®¾ç½®ä¸­çš„é…ç½®çš„è®°å½•

è¯¥æ¨¡å—ç”¨äºè§£é‡Šé…ç½®æ–‡ä»¶ä¸­çš„é€‰é¡¹å­—æ®µçš„å«ä¹‰

~~~json
{
    "loginCfg" : {  // ç™»å½•é…ç½®
        "RememberPwd" : 0 || 1,  // æ˜¯å¦è®°ä½å¯†ç  1è¡¨ç¤ºè®°ä½å¯†ç 
        "AutoLogin"   : 0 || 1,  // æ˜¯å¦è‡ªåŠ¨ç™»å½• 1è¡¨ç¤ºè‡ªåŠ¨ç™»å½•
        "Account"     : "...",   // è´¦å·
        "Password"    : "...",   // å¯†ç 
    },
    "settingCfg" : {  // è®¾ç½®é…ç½®
        "key" : { // å¯†é’¥è®¾ç½®
            value : "...", // å¯†é’¥å€¼ï¼ˆæ§åˆ¶ç ï¼‰
            customized : 0 | 1   // æ˜¯å¦è‡ªå®šä¹‰å¯†é’¥ 1è¡¨ç¤ºè‡ªå®šä¹‰
        },
        "selfStarting" : 0 | 1,   // æ˜¯å¦å¼€æœºè‡ªå¯åŠ¨ 1è¡¨ç¤ºå¼€æœºè‡ªå¯åŠ¨
        "adminRun" : 0 | 1,       // æ˜¯å¦ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ 1è¡¨ç¤ºæ˜¯
        "monitoringPQ" : 0 | 1 | 2, // ç›‘æ§ç”»è´¨ 0è¡¨ç¤ºæ ‡å‡† 1è¡¨ç¤ºæé«˜ 2è¡¨ç¤ºæ— æŸç”»è´¨
        "downloadDir" : "...",      // ä¸‹è½½ç›®å½•
        "cacheDir" : "...",         // ç¼“å­˜ç›®å½•
        "updateType" : 0 | 1        // è½¯ä»¶æ›´æ–°æ–¹å¼ 0è¡¨ç¤ºè‡ªåŠ¨æ›´æ–° 1è¡¨ç¤ºæœ‰æ›´æ–°æ—¶æé†’
    }
}
~~~

## æ–°å¢éœ€æ±‚è¯´æ˜ï¼ˆå·²éƒ¨åˆ†å®ç°ï¼ˆæœªå®Œæˆï¼‰ï¼‰

### 6æœˆ15æ—¥æ–°å¢åŠŸèƒ½éœ€æ±‚è¯´æ˜ï¼š

â€‹	1ã€è®¾å¤‡å…³æœºé‡å¯æ–°å¢æ—¶é—´è®¾ç½®ï¼Œå³æŒ‡å®šæ—¶é—´åæ‰§è¡Œå“åº”æ“ä½œ
â€‹		æ³¨ï¼šæ”¯æŒå°æ•°è®¾ç½®ï¼Œæ—¶é—´æ®µ0åˆ°5åˆ†é’Ÿ
â€‹	2ã€æ–°å¢è®¾å¤‡æ–‡ä»¶é¢„è§ˆã€ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ä»¥åŠæ–‡ä»¶æ‰§è¡ŒåŠŸèƒ½
â€‹	3ã€æ–°å¢æ”¯æŒè®¾å¤‡çŠ¶æ€æŸ¥çœ‹åŠŸèƒ½ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜......ï¼‰

## TODO:å¾…å®Œæˆä»»åŠ¡

å¾…æ¥å…¥é‚®ç®±æ¶ˆæ¯å‘é€

