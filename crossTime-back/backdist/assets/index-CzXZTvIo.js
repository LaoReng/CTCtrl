/* empty css                  *//* empty css                        *//* empty css                  */import{b as B,c as E}from"./index-BgvZQaKC.js";import{av as N,a7 as p,aT as T,aa as u,ab as j,ay as b,ad as o,ai as d,aA as y,af as f,ac as t,ar as S,am as V,aV as z,aW as K,aX as M,ao as P,ap as R,aj as w,a3 as L}from"./index-DPIfXxtw.js";const W=c=>(P("data-v-23147520"),c=c(),R(),c),X={class:"box"},q=W(()=>f("p",{style:{"font-size":"20px",padding:"20px 0 10px 30px",display:"inline-block"}},[f("i",null,"待处理的申请设备")],-1)),F={class:"elm-box"},G=N({__name:"index",setup(c){let v=p([{devicesId:"",devicesName:"",userId:"",secretKey:"",applyTime:""}]),s=p(),l=p();const n=p(!1);async function _(){try{const e=await B();e.status==1?v.value=e.data.list:console.error("API返回数据格式不符预期")}catch(e){console.error("请求失败:",e)}}T(()=>{_()});const x=e=>{(s.value=[])&&s.value.push(e.devicesId)},I=e=>{s.value=e.map(m=>m.devicesId),s.value.length>1?n.value=!0:n.value=!1};async function i(){try{(await E({devicesId:s.value,type:l.value})).status==1?(_(),w({message:"操作成功",type:"success"})):w.error("操作失败")}catch(e){console.error("请求失败:",e)}}const g=()=>{l.value="approve",i()},C=()=>{l.value="reject",i()},k=()=>{l.value="approve",i()},D=()=>{l.value="reject",i()};return(e,m)=>{const r=V,a=z,h=K,A=M;return u(),j("div",X,[q,n.value?(u(),b(r,{key:0,onClick:k,class:"right",type:"danger"},{default:o(()=>[d("批量拒绝")]),_:1})):y("",!0),n.value?(u(),b(r,{key:1,onClick:D,class:"right",type:"success"},{default:o(()=>[d("批量同意")]),_:1})):y("",!0),f("div",F,[t(A,{data:S(v),style:{width:"100%","margin-top":"-10px"},onRowClick:x,onSelectionChange:I},{default:o(()=>[t(a,{fixed:"left",type:"selection",width:"55"}),t(a,{prop:"devicesId",label:"设备ID","show-overflow-tooltip":""}),t(a,{prop:"devicesName",label:"设备名","show-overflow-tooltip":""}),t(a,{prop:"userId",label:"所属用户id","show-overflow-tooltip":""}),t(a,{prop:"secretKey",label:"秘钥","show-overflow-tooltip":""}),t(a,{prop:"applyTime",label:"申请时间","show-overflow-tooltip":""}),t(a,{fixed:"right",label:"         操作",width:"140"},{default:o(()=>[t(h,{width:"220","confirm-button-text":"确定","cancel-button-text":"不了",title:"你确定要同意吗?",onConfirm:g},{reference:o(()=>[t(r,{type:"success",size:"small"},{default:o(()=>[d("同意")]),_:1})]),_:1}),t(h,{width:"220","confirm-button-text":"确定","cancel-button-text":"不了",title:"你确定要拒绝吗?",onConfirm:C},{reference:o(()=>[t(r,{type:"danger",size:"small"},{default:o(()=>[d("拒绝")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])])])}}}),Y=L(G,[["__scopeId","data-v-23147520"]]);export{Y as default};
