/* empty css                  *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                  */import{d as P,s as T,a as L}from"./index-BgvZQaKC.js";import{av as M,a7 as s,aT as U,aa as b,ab as j,af as o,ac as t,ay as K,ad as r,ai as w,aA as R,ar as p,al as W,am as X,aV as Y,aW as q,aX as F,aY as G,aj as x,ao as H,ap as J,a3 as O}from"./index-DPIfXxtw.js";const Q=i=>(H("data-v-5b53ce81"),i=i(),J(),i),Z={class:"box"},$={class:"search-box"},ee=Q(()=>o("span",null,[o("i",{class:"el-icon",style:{"vertical-align":"middle",color:"rgb(255, 255, 255)"}},[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[o("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})])]),o("span",{style:{"vertical-align":"middle"}}," 搜索 ")],-1)),te=[ee],ae={class:"elm-box"},oe={class:"page-box"},se=M({__name:"index",setup(i){let d=s([{devicesId:"",devicesName:"",userId:"",secretKey:""}]),m=s(),h=s(10),n=s(1);const u=s(""),c=s([]),v=s(!1);async function _(e){try{const a=await P({page:n.value,pageSize:h.value});a.status==1?(d.value=a.data.list,m.value=a.data.total*10):console.error("API返回数据格式不符预期")}catch(a){console.error("请求失败:",a)}}U(()=>{_(n.value)});const y=e=>{n.value=e,_()};async function I(){try{const e=await T({userId:u.value});e.status==1?d.value=e.data.list:console.error("API返回数据格式不符预期")}catch(e){console.error("请求失败:",e)}}const C=()=>{I()},D=e=>{c.value=e.map(a=>a.devicesId),c.value.length>1?v.value=!0:v.value=!1},E=e=>{(c.value=[])&&c.value.push(e.devicesId)};async function f(){try{(await L({devicesIds:c.value})).status==1?(_(n.value),x({message:"删除成功",type:"success"})):x.error("删除失败")}catch(e){console.error("请求失败:",e)}}const S=()=>{f()},V=()=>{f()};return(e,a)=>{const k=W,g=X,l=Y,z=q,B=F,A=G;return b(),j("div",Z,[o("div",$,[t(k,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=N=>u.value=N),style:{width:"40%",height:"42px"},size:"large",placeholder:"输入用户ID筛选已同意的设备列表"},null,8,["modelValue"]),o("button",{onClick:C,style:{"margin-left":"10px",height:"40px"},"aria-disabled":"false",type:"button",class:"el-button el-button--primary"},te),v.value?(b(),K(g,{key:0,onClick:V,style:{height:"40px"},type:"danger"},{default:r(()=>[w("批量删除")]),_:1})):R("",!0)]),o("div",ae,[t(B,{data:p(d),style:{width:"100%","margin-top":"-10px"},onRowClick:E,onSelectionChange:D},{default:r(()=>[t(l,{fixed:"left",type:"selection",width:"55"}),t(l,{prop:"devicesId",label:"设备ID","show-overflow-tooltip":""}),t(l,{prop:"devicesName",label:"设备名","show-overflow-tooltip":""}),t(l,{prop:"userId",label:"所属用户id","show-overflow-tooltip":""}),t(l,{prop:"secretKey",label:"秘钥","show-overflow-tooltip":""}),t(l,{fixed:"right",label:"操作",width:"100"},{default:r(()=>[t(z,{width:"220","confirm-button-text":"确定","cancel-button-text":"不了",title:"你确定要删除此用户吗?",onConfirm:S},{reference:r(()=>[t(g,{type:"danger",size:"small"},{default:r(()=>[w("删除")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),o("div",oe,[t(A,{class:"page","page-size":p(h),"current-page":p(n),layout:"prev, pager, next, jumper",total:p(m),onCurrentChange:y},null,8,["page-size","current-page","total"])])])}}}),ue=O(se,[["__scopeId","data-v-5b53ce81"]]);export{ue as default};
