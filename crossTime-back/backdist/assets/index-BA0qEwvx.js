/* empty css                  *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                  */import{aS as C,av as W,a7 as n,aT as X,aa as v,ab as Y,af as r,ac as e,ar as f,aU as F,ay as b,ad as i,ai as x,aA as E,al as G,am as H,aV as J,aW as K,aX as O,aY as Q,aj as V,ao as Z,ap as U,a3 as $}from"./index-DPIfXxtw.js";const D=s=>C.get("/getUserList",{params:{page:s.page,pageSize:s.pageSize}}),ee=s=>C.get("/searchUserList",{params:{address:s.address}}),te=s=>C.post("/operateUser",{userIds:s.userIds,type:s.type}),oe=s=>(Z("data-v-3eee5357"),s=s(),U(),s),ae={class:"box"},le={class:"search-box"},se=oe(()=>r("span",null,[r("i",{class:"el-icon",style:{"vertical-align":"middle",color:"rgb(255, 255, 255)"}},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[r("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})])]),r("span",{style:{"vertical-align":"middle"}}," 搜索 ")],-1)),re=[se],ne={class:"elm-box"},ie={class:"page-box"},pe=W({__name:"index",setup(s){let p=n([{userId:"",username:"",sex:"",address:"",phone:"",registerTime:"",vipStatus:"",vipLevel:"",expirationDate:"",balance:"",totalRecharge:"",deviceControlTime:"",controlCount:"",remainingCount:"",expire:"",forbidden:""}]),I=n(),S=n(10),c=n(1),d=n(""),u=n("");const w=n(!1),h=n([]);async function y(t){try{const o=await D({page:c.value,pageSize:S.value});o.status==1?(p.value=o.data.list,I.value=o.data.total*10,p.value.forEach(l=>{l.sex=l.sex=="1"?"女":"男",l.vipStatus=l.vipStatus=="1"?"激活":"未激活"}),p.value.forEach(l=>{l.sex=l.sex=="1"?"女":"男",l.vipStatus=l.vipStatus=="1"?"激活":"未激活",l.expire=l.expire?"是":"否"})):console.error("API返回数据格式不符预期")}catch(o){console.error("请求失败:",o)}}X(()=>{y(c.value)});const z=t=>{c.value=t,y()};async function P(){try{const t=await ee({address:d.value});t.status==1?(p.value=t.data.list,p.value.forEach(o=>{o.sex=o.sex=="1"?"女":"男",o.vipStatus=o.vipStatus=="1"?"激活":"未激活",o.expire=o.expire?"是":"否"})):console.error("API返回数据格式不符预期")}catch(t){console.error("请求失败:",t)}}const T=()=>{P()},A=t=>{h.value=t.map(o=>o.userId),h.value.length>1?w.value=!0:w.value=!1},B=t=>{(h.value=[])&&h.value.push(t.userId)};async function m(){try{const t=await te({userIds:h.value,type:u.value});console.log(t),t.status==1?(y(c.value),V({message:"操作成功",type:"success"})):V.error("操作失败")}catch(t){console.error("请求失败:",t)}}const L=()=>{u.value="enabled",m()},N=()=>{u.value="disabled",m()},R=()=>{u.value="disabled",m()},j=()=>{u.value="enabled",m()};return(t,o)=>{const l=G,g=H,a=J,k=K,M=O,q=Q;return v(),Y("div",ae,[r("div",le,[e(l,{modelValue:f(d),"onUpdate:modelValue":o[0]||(o[0]=_=>F(d)?d.value=_:d=_),style:{width:"40%",height:"42px"},size:"large",placeholder:"输入地址筛选用户信息"},null,8,["modelValue"]),r("button",{onClick:T,style:{"margin-left":"10px",height:"40px"},"aria-disabled":"false",type:"button",class:"el-button el-button--primary"},re),w.value?(v(),b(g,{key:0,onClick:R,class:"right",type:"danger"},{default:i(()=>[x("批量禁用")]),_:1})):E("",!0),w.value?(v(),b(g,{key:1,onClick:j,class:"right",type:"success"},{default:i(()=>[x("批量启用")]),_:1})):E("",!0)]),r("div",ne,[e(M,{data:f(p),style:{width:"100%","margin-top":"-10px"},onSelectionChange:A,onRowClick:B},{default:i(()=>[e(a,{fixed:"left",type:"selection",width:"55"}),e(a,{prop:"userId",label:"用户ID",width:"90","show-overflow-tooltip":""}),e(a,{prop:"username",label:"用户名",width:"125","show-overflow-tooltip":""}),e(a,{prop:"sex",label:"性别",width:"80","show-overflow-tooltip":""}),e(a,{prop:"address",label:"地址",width:"200","show-overflow-tooltip":""}),e(a,{prop:"phone",label:"电话",width:"125","show-overflow-tooltip":""}),e(a,{prop:"registerTime",label:"注册时间",width:"170","show-overflow-tooltip":""}),e(a,{prop:"expire",label:"是否停用",width:"90","show-overflow-tooltip":""}),e(a,{prop:"vipStatus",label:"VIP状态",width:"90","show-overflow-tooltip":""}),e(a,{prop:"vipLevel",label:"VIP等级",width:"90","show-overflow-tooltip":""}),e(a,{prop:"expirationDate",label:"VIP到期时间",width:"170","show-overflow-tooltip":""}),e(a,{prop:"balance",label:"余额",width:"90","show-overflow-tooltip":""}),e(a,{prop:"totalRecharge",label:"累计充值",width:"100","show-overflow-tooltip":""}),e(a,{prop:"deviceControlTime",label:"可控天数",width:"90","show-overflow-tooltip":""}),e(a,{prop:"controlCount",label:"可控次数",width:"90","show-overflow-tooltip":""}),e(a,{prop:"remainingCount",label:"剩余次数",width:"90","show-overflow-tooltip":""}),e(a,{fixed:"right",label:"操作",width:"75"},{default:i(_=>[_.row.forbidden?(v(),b(k,{key:0,"confirm-button-text":"确定","cancel-button-text":"不了",title:"你确定要启用此用户吗?",onConfirm:L},{reference:i(()=>[e(g,{type:"success",size:"small"},{default:i(()=>[x("启用")]),_:1})]),_:1})):(v(),b(k,{key:1,"confirm-button-text":"确定","cancel-button-text":"不了",title:"你确定要禁用此用户吗?",onConfirm:N},{reference:i(()=>[e(g,{type:"danger",size:"small"},{default:i(()=>[x("禁用")]),_:1})]),_:1}))]),_:1})]),_:1},8,["data"])]),r("div",ie,[e(q,{class:"page","page-size":f(S),"current-page":f(c),layout:"prev, pager, next, jumper",total:f(I),onCurrentChange:z},null,8,["page-size","current-page","total"])])])}}}),we=$(pe,[["__scopeId","data-v-3eee5357"]]);export{we as default};
