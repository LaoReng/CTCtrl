import{ax as K,f as m,g as y,J as Q,ay as we,C as Z,D as ee,i as a,I as ke,j as r,r as f,u as Ce,b as H,az as V,a9 as Se,o as qe,e as Ie,l as O,v as W,H as L,h as _,w as d,X as Ee,Y as $e,au as j,t as I,n as w,E as g,aA as De,aa as Ve,a2 as Le,aB as Me,_ as Te,z as Ne,aC as Fe,x as Be,s as Pe,A as Re,y as Xe,ae as Ye}from"./vendor-Dj-i8j__.js";import{_ as T,b as ze,G as E}from"./index-2bWTvhk3.js";import{H as Ae}from"./home-BQ6SLRyk.js";const Ue=we('<span class="point" data-v-ada2790e></span><span class="wave1" data-v-ada2790e></span><span class="wave2" data-v-ada2790e></span><span class="wave3" data-v-ada2790e></span><span class="wave4" data-v-ada2790e></span>',5),Ge=[Ue],He={__name:"Circle",props:["color","borderColor"],setup(c){return K(s=>({"74bf9022":c.color,"93a7c7d4":c.borderColor})),(s,N)=>(m(),y("div",{class:"dot",style:Q({"--bg-color":c.color,"--border-color":c.borderColor})},Ge,4))}},J=T(He,[["__scopeId","data-v-ada2790e"]]),$={color:"black",cursor:"pointer"},Oe={},We=c=>(Z("data-v-bafd50d8"),c=c(),ee(),c),je={class:"grid"},Je=We(()=>a("div",{class:"loader"},[a("div",{id:"ld2"},[a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div")])],-1)),Ke=[Je];function Qe(c,s){return m(),y("div",je,Ke)}const Ze=T(Oe,[["render",Qe],["__scopeId","data-v-bafd50d8"]]),k=c=>(Z("data-v-ec641fdd"),c=c(),ee(),c),et={class:"homeContainer"},tt={key:1,class:"ListShow"},st={key:0},at={class:"clearfix"},ot={style:{"font-size":"1.2rem"}},lt={key:0,class:"left"},nt=k(()=>a("span",{class:"left_Text"},"在线",-1)),rt={key:1,class:"right"},it=k(()=>a("span",{class:"right_Text"},"繁忙",-1)),dt={class:"text"},ut=k(()=>a("div",null,"用户名：test用户",-1)),ct={key:1,style:{width:"100%"}},_t={class:"dialog-footer"},pt=k(()=>a("div",{style:{"text-align":"center","font-size":"20px"}},"受限说明",-1)),mt={style:{"margin-top":"20px","line-height":"25px"}},ft={style:{display:"flex","margin-left":"20px"}},ht=k(()=>a("p",{style:{}},"web前台地址：",-1)),vt={style:{display:"flex","margin-left":"20px"}},yt=k(()=>a("p",null,"后台管理地址：",-1)),bt=ke({__name:"index",setup(c){K(e=>({"70d6f584":r(Y)}));const s=Ae();s.init();const N=ze();let F=f("http://118.190.96.96:8090"),B=f(" http://118.190.96.96:9090"),P=Ce(),R=f(""),X=f(),C=H({secretInput:""});const te={secretInput:[{required:!0,message:"请输入密钥",trigger:"blur"}]},b=f(!1);let se=f(!1);const h=f([]);let ae=f(!1),x=f({name:"",index:""}),S=f(),q=f(),Y=f(0);const oe=async(e,t)=>{if(await s.init(),e.eStatus==2){x.value.name=e.name,x.value.index=t,g({showClose:!0,message:"当前设备正在被控制，请稍后再试~",type:"error",duration:1e3});return}if(E()==null){g({showClose:!0,message:"请登录",type:"error"});return}x.value.name=e.name,x.value.index=t,b.value=!0},le=async()=>{await X.value.validate(async e=>{if(e){b.value=!1;let{name:t,index:n}=x.value;ie(t,n)}else return})};let ne="ws://118.190.96.96:9002";const re=(e,t,n)=>{const p=[{label:"连接",tip:"连接被控端",click:()=>{if(E()==null){g({showClose:!0,message:"请登录",type:"error"});return}R.value=t.name,b.value=!0,x.value.name=t.name,x.value.index=n}},{label:"文件浏览",tip:"预览被控端文件",click:()=>{if(E()==null){g({showClose:!0,message:"请登录",type:"error"});return}s.rightClickPreviewDeviceName=t.name;const u=new WebSocket(ne);u.addEventListener("open",()=>{s.isShowFileSystemDialog=!0}),u.addEventListener("error",i=>{s.isShowFileSystemDialog=!0}),u.addEventListener("close",()=>{s.isShowFileSystemDialog=!1,g({message:"当前连接发生错误，请稍后再试",type:"error"})})}},{label:"详细信息",enter:()=>{ae.value=!0},children:[{label:`当前设备：${t.name}`,disabled:!0,style:$},{label:`当前ip：${t.ip}`,disabled:!0,style:$},{label:`设备名：${t.name}`,disabled:!0,style:$},{label:`设备状况：${t.eStatus==1?"在线":"繁忙"}`,disabled:!0,style:$},{label:"设备所属地区：黑龙江",disabled:!0,style:$}]}];De(e,p),e.preventDefault()};async function ie(e,t){var n;try{if(await s.init(),((n=s.equipInfo.equipments)==null?void 0:n[t].eStatus)==2)return;if(E()==null){g({showClose:!0,message:"请登录",type:"error"});return}else if(s.requestParam.ctrlerPhone=E(),s.requestParam.bectrlEquipName=e,s.requestParam.startCtrlTime=new Date().toLocaleString().replaceAll("/","-"),s.requestParam.key=C.secretInput,(await s.startControl()).eStatus!=2)if(s.equipInfo.equipments[t].type==2){let u=P.resolve({path:"/embed"}),i=window.open(u.href,"openhsWindows");const v=setInterval(async()=>{i!=null&&i.closed&&(await s.endTime({bectrlEquipName:e}),clearInterval(v))},1e3);s.init()}else{let u=P.resolve({name:"vnc",query:{name:e}}),i=window.open(u.href,"openhsWindows");const v=setInterval(async()=>{i!=null&&i.closed&&(await s.endTime({bectrlEquipName:e}),clearInterval(v))},1e3);s.init()}else g({type:"error",message:"输入密钥不正确",showClose:!0,duration:1600})}catch{g({type:"error",message:"输入密钥不正确",showClose:!0,duration:1600})}}const o=H({is_show_mask:!1,box_screen_left:0,box_screen_top:0,start_x:0,start_y:0,end_x:0,end_y:0,scroll:0,transition_delay:!0});let de=V(()=>`${Math.abs(o.end_x-o.start_x)}px;`),ue=V(()=>`${Math.abs(o.end_y-o.start_y)}px;`),ce=V(()=>`${Math.min(o.start_x,o.end_x)-o.box_screen_left}px;`),_e=V(()=>`${Math.min(o.start_y,o.end_y)-o.box_screen_top}px;`),pe=(e,t)=>{let n=t.id,p=h.value.indexOf(n);p<0?h.value.push(n):h.value.splice(p,1)};Se(()=>N.fold,()=>{o.transition_delay=!1,Ve(()=>{setTimeout(()=>{let e=document.querySelector(".content");S.value=e==null?void 0:e.offsetLeft,q.value=e==null?void 0:e.offsetTop,o.transition_delay=!0},1e3)})});const me=e=>{var t,n;e.which==1&&(e.preventDefault(),o.is_show_mask=!0,o.start_x=e.pageX-S.value,o.start_y=e.pageY-q.value,o.end_x=e.pageX-S.value,o.end_y=e.pageY-q.value,(t=document.querySelector(".content"))==null||t.addEventListener("mousemove",z),(n=document.querySelector(".content"))==null||n.addEventListener("mouseup",A))};function z(e){o.end_x=e.pageX-S.value,o.end_y=e.pageY-q.value}function A(){var e,t;(e=document.querySelector(".content"))==null||e.removeEventListener("mousemove",z),(t=document.querySelector(".content"))==null||t.removeEventListener("mouseup",A),o.is_show_mask=!1,fe(),ve(),s.selectedCard=[...h.value]}qe(()=>{let e=document.querySelector(".content");S.value=e==null?void 0:e.offsetLeft,q.value=e==null?void 0:e.offsetTop;let t=document.querySelector(".box-img");Y.value=t.offsetTop});function fe(){const e=window.document.querySelector(".mask"),t=e==null?void 0:e.getClientRects()[0],n=[],p=[];document.querySelectorAll(".el-checkbox-group .el-checkbox").forEach((u,i)=>{const v=u.getClientRects()[0];he(v,t)===!0&&(h.value.includes(s.equipInfo.equipments[i].id)?p.push(s.equipInfo.equipments[i].id):n.push(s.equipInfo.equipments[i].id))}),h.value=h.value.concat(n).filter(u=>!p.includes(u))}function he(e,t){const n=Math.max(e.x+e.width,t.x+t.width),p=Math.max(e.y+e.height,t.y+t.height),u=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return n-u<=e.width+t.width&&p-i<=e.height+t.height}function ve(){o.start_x=0,o.start_y=0,o.end_x=0,o.end_y=0}return(e,t)=>{const n=Le,p=Me,u=Te,i=Ie("RouterLink"),v=Ne,ye=Fe,be=Be,ge=Pe,xe=Re,U=Xe,G=Ye;return m(),y("div",et,[O(a("div",{class:"mask",style:Q("width:"+r(de)+"left:"+r(ce)+"height:"+r(ue)+"top:"+r(_e))},null,4),[[W,o.is_show_mask&&o.transition_delay==!0]]),a("div",{class:"box-img",onMousedown:me},[r(s).isLoading?(m(),L(Ze,{key:0})):(m(),y("div",tt,[r(s).equipInfo.equipments!=null?(m(),y("div",st,[_(u,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=l=>h.value=l),class:"checkboxGroup"},{default:d(()=>[(m(!0),y(Ee,null,$e(r(s).equipInfo.equipments,(l,M)=>(m(),L(p,{key:M,value:l.id,class:j(h.value.includes(l.id)?"checkbox aa-active":"checkbox"),onClick:D=>r(pe)(D,l),onDblclick:D=>oe(l,M)},{default:d(()=>[_(n,{onContextmenu:D=>re(D,l,M),disabled:l.eStatus==2,class:j({"box-card-mang":l.eStatus==2,"box-card-you":l.eStatus==1})},{header:d(()=>[a("div",at,[a("span",ot,I(l.name),1),l.eStatus==1?(m(),y("div",lt,[_(J,{color:"rgb(4, 102, 4)",borderColor:"rgb(119, 204, 119)"},null,8,["color","borderColor"]),nt])):(m(),y("div",rt,[_(J,{color:"rgb(255, 60, 92)",borderColor:"rgb(255, 113, 113)"},null,8,["color","borderColor"]),it]))])]),default:d(()=>[a("div",dt,[a("div",null,"IP地址："+I(l.ip),1),ut,a("div",null," 系   统："+I(l.type==1?"windows":"嵌入式"),1)])]),_:2},1032,["onContextmenu","disabled","class"]),O(a("span",null,null,512),[[W,h.value.includes(l.id)]])]),_:2},1032,["value","class","onClick","onDblclick"]))),128))]),_:1},8,["modelValue"])])):(m(),y("div",ct,[_(ye,{style:{width:"100%",height:"80vh"},description:"暂无设备"},{default:d(()=>[_(v,{type:"info"},{default:d(()=>[_(i,{target:"_blank",to:"/desc"},{default:d(()=>[w("查看使用说明")]),_:1})]),_:1})]),_:1})]))]))],32),r(se)?(m(),L(G,{key:0,modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=l=>b.value=l),title:`请输入连接${r(R)}设备秘钥`,width:"300",draggable:"","align-center":"",onClosed:t[4]||(t[4]=l=>r(C).secretInput="")},{footer:d(()=>[a("div",_t,[_(U,{onClick:t[2]||(t[2]=l=>b.value=!1)},{default:d(()=>[w("取消")]),_:1}),_(U,{type:"primary",onClick:le},{default:d(()=>[w(" 确定 ")]),_:1})])]),default:d(()=>[_(xe,{ref_key:"ruleFormRef",ref:X,rules:te,model:r(C)},{default:d(()=>[_(ge,{prop:"secretInput"},{default:d(()=>[_(be,{modelValue:r(C).secretInput,"onUpdate:modelValue":t[1]||(t[1]=l=>r(C).secretInput=l),type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])):(m(),L(G,{key:1,draggable:"",width:"450","align-center":"",modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=l=>b.value=l)},{header:d(()=>[pt,a("div",mt,[w(" 由于域名端口请求访问次数限制，当前访问只允许部分功能使用完整功能请访问 "),a("div",ft,[ht,_(v,{href:r(B),target:"_blank"},{default:d(()=>[w(I(r(B)),1)]),_:1},8,["href"])]),a("div",vt,[yt,_(v,{href:r(F),target:"_blank"},{default:d(()=>[w(I(r(F)),1)]),_:1},8,["href"])])])]),_:1},8,["modelValue"]))])}}}),kt=T(bt,[["__scopeId","data-v-ec641fdd"]]);export{kt as default};
